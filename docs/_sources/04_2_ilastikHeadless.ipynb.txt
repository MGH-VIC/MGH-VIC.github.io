{
 "cells": [
  {
   "cell_type": "markdown",
   "id": "45f6f932-5413-4191-b23c-34199ad9049e",
   "metadata": {},
   "source": [
    "# Ilastik run without interface"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "id": "618c4dfb",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'/opt/conda/envs/miaaim-dev/bin/python'"
      ]
     },
     "execution_count": 1,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Ilastik pixel classification preparation\n",
    "# import custom modules\n",
    "from miaaim.probs.ilastik.ilastik import Ilastik\n",
    "\n",
    "# import external modules\n",
    "from pathlib import Path\n",
    "import pandas as pd\n",
    "import os\n",
    "\n",
    "# check versions and environment executable\n",
    "import sys\n",
    "sys.version\n",
    "sys.executable"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "id": "6e14e5b5",
   "metadata": {},
   "outputs": [],
   "source": [
    "# set path to project folder\n",
    "project_folder = Path(\"/opt/miaaim-20220912-TMA4\")\n",
    "# set path to data folder\n",
    "data_folder = project_folder.joinpath(\"data\")\n",
    "\n",
    "# get image preprocessing channels to use as a list of indices\n",
    "prep_channels = pd.read_csv(Path(data_folder).joinpath(\"imc-preprocessing-markers.csv\"))\n",
    "prep_channels = [int(prep_channels.Page.values[i]) for i in range(len(prep_channels.Page.values))]\n",
    "\n",
    "# get list of all images in the data folder (all used for training)\n",
    "core_folders =[data_folder.joinpath(c) for c in os.listdir(data_folder) if data_folder.joinpath(c).is_dir()]\n",
    "# set model\n",
    "ilp_model = project_folder.joinpath(\"models/TMA4-PROSTATE-pixel-classification.ilp\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "id": "dedeac9a",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "[PosixPath('/opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI011_PROSTATE_TMA002'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI012_PROSTATE_TMA003'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI013_PROSTATE_TMA004'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI014_PROSTATE_TMA005'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI015_PROSTATE_TMA006'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI016_PROSTATE_TMA007'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI017_PROSTATE_TMA008'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI018_PROSTATE_TMA009'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI019_PROSTATE_Benign_TMA008N'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI020_PROSTATE_Benign_TMA011N'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI021_PROSTATE_TMA012'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI022_PROSTATE_TMA013'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI023_PROSTATE_TMA015'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI024_PROSTATE_TMA016'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI025_PROSTATE_TMA017'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI026_PROSTATE_TMA018'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI027_PROSTATE_TMA019'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI028_PROSTATE_TMA020'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI029_PROSTATE_TMA022'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI030_PROSTATE_TMA023'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI031_PROSTATE_TMA024'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI032_PROSTATE_TMA025'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI033_PROSTATE_TMA026'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI034_PROSTATE_TMA027'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI035_PROSTATE_Benign_TMA027N'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI036_PROSTATE_Benign_TMA028N'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI037_PROSTATE_TMA028'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI038_PROSTATE_TMA030'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI039_PROSTATE_TMA031'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI040_PROSTATE_TMA032'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI041_PROSTATE_TMA033'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI042_PROSTATE_TMA034'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI043_PROSTATE_TMA035'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI044_PROSTATE_TMA036'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI045_PROSTATE_TMA038'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI046_PROSTATE_TMA039'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI047_PROSTATE_TMA041'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI048_PROSTATE_TMA042'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI049_PROSTATE_TMA044'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI050_PROSTATE_TMA045'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI051_PROSTATE_Benign_TMA043N'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI052_PROSTATE_Benign_TMA046N'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI053_PROSTATE_TMA046'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI054_PROSTATE_TMA048'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI055_PROSTATE_TMA049'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI056_PROSTATE_TMA054'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI057_PROSTATE_TMA055'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI058_PROSTATE_TMA056'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI059_PROSTATE_TMA057'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI060_PROSTATE_TMA059'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI061_PROSTATE_TMA060'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI062_PROSTATE_TMA061'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI063_PROSTATE_TMA062'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI064_PROSTATE_Benign_TMA063N'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI065_PROSTATE_Benign_TMA064N'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI066_PROSTATE_TMA064'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI067_PROSTATE_TMA065'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI068_PROSTATE_TMA066'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI069_PROSTATE_TMA067'),\n",
       " PosixPath('/opt/miaaim-20220912-TMA4/data/ROI070_PROSTATE_TMA070')]"
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# check to make sure we have the core folders for only prostate samples\n",
    "core_folders = [c for c in core_folders if \"PROSTATE\" in c.name]\n",
    "core_folders"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "id": "47f07118",
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "[PosixPath('/opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001')]"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "core_folders[:1]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "id": "8a3a6ea4",
   "metadata": {},
   "outputs": [
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001/preprocessing/imc/ROI010_PROSTATE_TMA001_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': True}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001/preprocessing/imc/ROI010_PROSTATE_TMA001_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC', {'PredictHeadless': {'ilp': '/opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp', 'input_hdf5': '/opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001/probabilities/imc/ilastik-training/ROI010_PROSTATE_TMA001_core.hdf5', 'output': '/opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001/probabilities/imc/ilastik', 'output_format': 'tiff', 'output_filename_format': '{nickname}_probabilities.tiff', 'export_source': 'Probabilities', 'pipeline_result_drange': '[0,1.0]', 'export_dtype': 'uint16', 'export_drange': '[0,65535]'}}, 'QC', {'PredictHeadless': {'ilp': '/opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp', 'input_hdf5': '/opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001/probabilities/imc/ilastik-training/ROI010_PROSTATE_TMA001_core.hdf5', 'output': '/opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001/probabilities/imc/ilastik', 'output_format': 'tiff', 'output_filename_format': '{nickname}_probabilities.tiff', 'export_source': 'Probabilities', 'pipeline_result_drange': '[0,1.0]', 'export_dtype': 'uint16', 'export_drange': '[0,65535]'}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:27:13,716 opConservationTracking 420 140478123829056 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:27:13,729 opStructuredTracking 420 140478123829056 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:27:13,731 structuredTrackingWorkflow 420 140478123829056 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:27:14,451 __init__ 420 140478123829056 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001/probabilities/imc/ilastik/ROI010_PROSTATE_TMA001_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 20.246875 seconds. Prediction took 3.158234 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 16.73658 seconds. Prediction took 6.923851 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 22.227419 seconds. Prediction took 2.8294 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1288, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 30.59255 seconds. Prediction took 4.867595 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 32.87325 seconds. Prediction took 3.866937 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.561794 seconds. Prediction took 1.514103 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1288, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.543290999999996 seconds. Prediction took 1.275594 seconds. Subregion: start '[1010, 0, 0]' stop '[1219, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.98706 seconds. Prediction took 0.917644 seconds. Subregion: start '[1010, 504, 0]' stop '[1219, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 7.235556 seconds. Prediction took 0.305796 seconds. Subregion: start '[1010, 1008, 0]' stop '[1219, 1288, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI010_PROSTATE_TMA001/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI011_PROSTATE_TMA002', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI011_PROSTATE_TMA002/preprocessing/imc/ROI011_PROSTATE_TMA002_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': True}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI011_PROSTATE_TMA002/preprocessing/imc/ROI011_PROSTATE_TMA002_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI011_PROSTATE_TMA002/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC', {'PredictHeadless': {'ilp': '/opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp', 'input_hdf5': '/opt/miaaim-20220912-TMA4/data/ROI011_PROSTATE_TMA002/probabilities/imc/ilastik-training/ROI011_PROSTATE_TMA002_core.hdf5', 'output': '/opt/miaaim-20220912-TMA4/data/ROI011_PROSTATE_TMA002/probabilities/imc/ilastik', 'output_format': 'tiff', 'output_filename_format': '{nickname}_probabilities.tiff', 'export_source': 'Probabilities', 'pipeline_result_drange': '[0,1.0]', 'export_dtype': 'uint16', 'export_drange': '[0,65535]'}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI011_PROSTATE_TMA002\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI011_PROSTATE_TMA002/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI011_PROSTATE_TMA002/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI011_PROSTATE_TMA002/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:28:52,711 opConservationTracking 438 139826146293568 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:28:52,722 opStructuredTracking 438 139826146293568 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:28:52,724 structuredTrackingWorkflow 438 139826146293568 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:28:53,401 __init__ 438 139826146293568 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI011_PROSTATE_TMA002/probabilities/imc/ilastik/ROI011_PROSTATE_TMA002_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.442958 seconds. Prediction took 2.663811 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.114908 seconds. Prediction took 4.25893 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.661157 seconds. Prediction took 1.240801 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1173, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.166574 seconds. Prediction took 2.610413 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1173, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.607243 seconds. Prediction took 2.596667 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.805862 seconds. Prediction took 2.634496 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.308979 seconds. Prediction took 0.826927 seconds. Subregion: start '[1010, 0, 0]' stop '[1152, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.138293 seconds. Prediction took 0.810182 seconds. Subregion: start '[1010, 504, 0]' stop '[1152, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 5.132802 seconds. Prediction took 0.134242 seconds. Subregion: start '[1010, 1008, 0]' stop '[1152, 1173, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI011_PROSTATE_TMA002/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI011_PROSTATE_TMA002/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI012_PROSTATE_TMA003', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI012_PROSTATE_TMA003/preprocessing/imc/ROI012_PROSTATE_TMA003_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': True}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI012_PROSTATE_TMA003/preprocessing/imc/ROI012_PROSTATE_TMA003_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI012_PROSTATE_TMA003/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC', {'PredictHeadless': {'ilp': '/opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp', 'input_hdf5': '/opt/miaaim-20220912-TMA4/data/ROI012_PROSTATE_TMA003/probabilities/imc/ilastik-training/ROI012_PROSTATE_TMA003_core.hdf5', 'output': '/opt/miaaim-20220912-TMA4/data/ROI012_PROSTATE_TMA003/probabilities/imc/ilastik', 'output_format': 'tiff', 'output_filename_format': '{nickname}_probabilities.tiff', 'export_source': 'Probabilities', 'pipeline_result_drange': '[0,1.0]', 'export_dtype': 'uint16', 'export_drange': '[0,65535]'}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI012_PROSTATE_TMA003\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI012_PROSTATE_TMA003/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI012_PROSTATE_TMA003/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI012_PROSTATE_TMA003/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:30:36,565 opConservationTracking 456 140568949409600 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:30:36,577 opStructuredTracking 456 140568949409600 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:30:36,579 structuredTrackingWorkflow 456 140568949409600 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:30:37,215 __init__ 456 140568949409600 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI012_PROSTATE_TMA003/probabilities/imc/ilastik/ROI012_PROSTATE_TMA003_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.34121 seconds. Prediction took 6.737065 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 31.279183 seconds. Prediction took 2.937081 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 31.283385 seconds. Prediction took 4.7649740000000005 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1220, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.61201 seconds. Prediction took 3.6556990000000003 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.515749 seconds. Prediction took 3.921995 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 47.267589 seconds. Prediction took 0.996195 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1220, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.776725 seconds. Prediction took 1.4963899999999999 seconds. Subregion: start '[1010, 0, 0]' stop '[1130, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 49.084902 seconds. Prediction took 0.555086 seconds. Subregion: start '[1010, 504, 0]' stop '[1130, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.130911 seconds. Prediction took 0.129938 seconds. Subregion: start '[1010, 1008, 0]' stop '[1130, 1220, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI012_PROSTATE_TMA003/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI012_PROSTATE_TMA003/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI013_PROSTATE_TMA004', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI013_PROSTATE_TMA004/preprocessing/imc/ROI013_PROSTATE_TMA004_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': True}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI013_PROSTATE_TMA004/preprocessing/imc/ROI013_PROSTATE_TMA004_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI013_PROSTATE_TMA004/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC', {'PredictHeadless': {'ilp': '/opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp', 'input_hdf5': '/opt/miaaim-20220912-TMA4/data/ROI013_PROSTATE_TMA004/probabilities/imc/ilastik-training/ROI013_PROSTATE_TMA004_core.hdf5', 'output': '/opt/miaaim-20220912-TMA4/data/ROI013_PROSTATE_TMA004/probabilities/imc/ilastik', 'output_format': 'tiff', 'output_filename_format': '{nickname}_probabilities.tiff', 'export_source': 'Probabilities', 'pipeline_result_drange': '[0,1.0]', 'export_dtype': 'uint16', 'export_drange': '[0,65535]'}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI013_PROSTATE_TMA004\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI013_PROSTATE_TMA004/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI013_PROSTATE_TMA004/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI013_PROSTATE_TMA004/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:32:23,633 opConservationTracking 474 140128463533888 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:32:23,644 opStructuredTracking 474 140128463533888 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:32:23,646 structuredTrackingWorkflow 474 140128463533888 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:32:24,298 __init__ 474 140128463533888 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI013_PROSTATE_TMA004/probabilities/imc/ilastik/ROI013_PROSTATE_TMA004_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.934904 seconds. Prediction took 4.930491 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 25.72425 seconds. Prediction took 3.890339 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.933102 seconds. Prediction took 3.077897 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1239, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 35.296836 seconds. Prediction took 3.537182 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.527078 seconds. Prediction took 1.971082 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.840011 seconds. Prediction took 3.001269 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1239, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.674184 seconds. Prediction took 1.626333 seconds. Subregion: start '[1010, 0, 0]' stop '[1137, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.959625 seconds. Prediction took 0.711159 seconds. Subregion: start '[1010, 504, 0]' stop '[1137, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.035912 seconds. Prediction took 0.151447 seconds. Subregion: start '[1010, 1008, 0]' stop '[1137, 1239, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI013_PROSTATE_TMA004/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI013_PROSTATE_TMA004/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI014_PROSTATE_TMA005', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI014_PROSTATE_TMA005/preprocessing/imc/ROI014_PROSTATE_TMA005_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': True}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI014_PROSTATE_TMA005/preprocessing/imc/ROI014_PROSTATE_TMA005_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI014_PROSTATE_TMA005/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC', {'PredictHeadless': {'ilp': '/opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp', 'input_hdf5': '/opt/miaaim-20220912-TMA4/data/ROI014_PROSTATE_TMA005/probabilities/imc/ilastik-training/ROI014_PROSTATE_TMA005_core.hdf5', 'output': '/opt/miaaim-20220912-TMA4/data/ROI014_PROSTATE_TMA005/probabilities/imc/ilastik', 'output_format': 'tiff', 'output_filename_format': '{nickname}_probabilities.tiff', 'export_source': 'Probabilities', 'pipeline_result_drange': '[0,1.0]', 'export_dtype': 'uint16', 'export_drange': '[0,65535]'}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI014_PROSTATE_TMA005\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI014_PROSTATE_TMA005/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI014_PROSTATE_TMA005/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI014_PROSTATE_TMA005/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:34:07,983 opConservationTracking 492 140599879407424 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:34:07,994 opStructuredTracking 492 140599879407424 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:34:07,996 structuredTrackingWorkflow 492 140599879407424 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:34:08,650 __init__ 492 140599879407424 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI014_PROSTATE_TMA005/probabilities/imc/ilastik/ROI014_PROSTATE_TMA005_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.298706 seconds. Prediction took 4.02834 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.83439 seconds. Prediction took 4.347552 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.11422 seconds. Prediction took 3.58247 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1233, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 35.741418 seconds. Prediction took 4.819407 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.607966 seconds. Prediction took 3.16848 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.949737999999996 seconds. Prediction took 1.971584 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1233, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.561153 seconds. Prediction took 2.610094 seconds. Subregion: start '[1010, 0, 0]' stop '[1163, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.179819 seconds. Prediction took 0.599695 seconds. Subregion: start '[1010, 1008, 0]' stop '[1163, 1233, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.230595 seconds. Prediction took 0.418201 seconds. Subregion: start '[1010, 504, 0]' stop '[1163, 1008, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI014_PROSTATE_TMA005/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI014_PROSTATE_TMA005/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI015_PROSTATE_TMA006', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI015_PROSTATE_TMA006/preprocessing/imc/ROI015_PROSTATE_TMA006_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': True}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI015_PROSTATE_TMA006/preprocessing/imc/ROI015_PROSTATE_TMA006_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI015_PROSTATE_TMA006/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC', {'PredictHeadless': {'ilp': '/opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp', 'input_hdf5': '/opt/miaaim-20220912-TMA4/data/ROI015_PROSTATE_TMA006/probabilities/imc/ilastik-training/ROI015_PROSTATE_TMA006_core.hdf5', 'output': '/opt/miaaim-20220912-TMA4/data/ROI015_PROSTATE_TMA006/probabilities/imc/ilastik', 'output_format': 'tiff', 'output_filename_format': '{nickname}_probabilities.tiff', 'export_source': 'Probabilities', 'pipeline_result_drange': '[0,1.0]', 'export_dtype': 'uint16', 'export_drange': '[0,65535]'}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI015_PROSTATE_TMA006\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI015_PROSTATE_TMA006/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI015_PROSTATE_TMA006/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI015_PROSTATE_TMA006/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:35:50,714 opConservationTracking 510 140204105578304 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:35:50,725 opStructuredTracking 510 140204105578304 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:35:50,727 structuredTrackingWorkflow 510 140204105578304 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:35:51,422 __init__ 510 140204105578304 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI015_PROSTATE_TMA006/probabilities/imc/ilastik/ROI015_PROSTATE_TMA006_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.357288 seconds. Prediction took 2.2785320000000002 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.120389 seconds. Prediction took 2.92194 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.585587 seconds. Prediction took 0.722085 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1157, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 35.027816 seconds. Prediction took 1.7502520000000001 seconds. Subregion: start '[505, 1008, 0]' stop '[879, 1157, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 35.5424 seconds. Prediction took 2.4752330000000002 seconds. Subregion: start '[505, 0, 0]' stop '[879, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 36.974367 seconds. Prediction took 1.163719 seconds. Subregion: start '[505, 504, 0]' stop '[879, 1008, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI015_PROSTATE_TMA006/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI015_PROSTATE_TMA006/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI016_PROSTATE_TMA007', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI016_PROSTATE_TMA007/preprocessing/imc/ROI016_PROSTATE_TMA007_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': True}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI016_PROSTATE_TMA007/preprocessing/imc/ROI016_PROSTATE_TMA007_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI016_PROSTATE_TMA007/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC', {'PredictHeadless': {'ilp': '/opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp', 'input_hdf5': '/opt/miaaim-20220912-TMA4/data/ROI016_PROSTATE_TMA007/probabilities/imc/ilastik-training/ROI016_PROSTATE_TMA007_core.hdf5', 'output': '/opt/miaaim-20220912-TMA4/data/ROI016_PROSTATE_TMA007/probabilities/imc/ilastik', 'output_format': 'tiff', 'output_filename_format': '{nickname}_probabilities.tiff', 'export_source': 'Probabilities', 'pipeline_result_drange': '[0,1.0]', 'export_dtype': 'uint16', 'export_drange': '[0,65535]'}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI016_PROSTATE_TMA007\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI016_PROSTATE_TMA007/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI016_PROSTATE_TMA007/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI016_PROSTATE_TMA007/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:37:26,826 opConservationTracking 528 140019535296320 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:37:26,836 opStructuredTracking 528 140019535296320 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:37:26,839 structuredTrackingWorkflow 528 140019535296320 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:37:27,500 __init__ 528 140019535296320 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI016_PROSTATE_TMA007/probabilities/imc/ilastik/ROI016_PROSTATE_TMA007_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 13.16637 seconds. Prediction took 2.356487 seconds. Subregion: start '[1010, 504, 0]' stop '[1146, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.831696 seconds. Prediction took 4.735736 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.317062 seconds. Prediction took 4.678059 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 33.04433 seconds. Prediction took 1.202724 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1281, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.822214 seconds. Prediction took 3.235831 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.867513 seconds. Prediction took 2.922842 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.031788 seconds. Prediction took 1.356765 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1281, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 47.833107 seconds. Prediction took 0.806469 seconds. Subregion: start '[1010, 0, 0]' stop '[1146, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 33.239109 seconds. Prediction took 0.179241 seconds. Subregion: start '[1010, 1008, 0]' stop '[1146, 1281, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI016_PROSTATE_TMA007/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI016_PROSTATE_TMA007/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI017_PROSTATE_TMA008', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI017_PROSTATE_TMA008/preprocessing/imc/ROI017_PROSTATE_TMA008_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI017_PROSTATE_TMA008/preprocessing/imc/ROI017_PROSTATE_TMA008_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI017_PROSTATE_TMA008/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI017_PROSTATE_TMA008\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI017_PROSTATE_TMA008/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI017_PROSTATE_TMA008/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI017_PROSTATE_TMA008/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:39:13,451 opConservationTracking 546 140638257710912 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:39:13,463 opStructuredTracking 546 140638257710912 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:39:13,465 structuredTrackingWorkflow 546 140638257710912 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:39:14,143 __init__ 546 140638257710912 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI017_PROSTATE_TMA008/probabilities/imc/ilastik/ROI017_PROSTATE_TMA008_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.192922 seconds. Prediction took 3.974313 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 25.327534 seconds. Prediction took 2.633147 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.764354 seconds. Prediction took 1.5575139999999998 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1263, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 36.911539 seconds. Prediction took 2.915143 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.56119 seconds. Prediction took 2.774438 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1263, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.19367 seconds. Prediction took 3.007964 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.081629 seconds. Prediction took 2.602986 seconds. Subregion: start '[1010, 0, 0]' stop '[1229, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 4.772697 seconds. Prediction took 0.273462 seconds. Subregion: start '[1010, 1008, 0]' stop '[1229, 1263, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 47.464637 seconds. Prediction took 1.53775 seconds. Subregion: start '[1010, 504, 0]' stop '[1229, 1008, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI017_PROSTATE_TMA008/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI017_PROSTATE_TMA008/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI018_PROSTATE_TMA009', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI018_PROSTATE_TMA009/preprocessing/imc/ROI018_PROSTATE_TMA009_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI018_PROSTATE_TMA009/preprocessing/imc/ROI018_PROSTATE_TMA009_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI018_PROSTATE_TMA009/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI018_PROSTATE_TMA009\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI018_PROSTATE_TMA009/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI018_PROSTATE_TMA009/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI018_PROSTATE_TMA009/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:41:00,396 opConservationTracking 564 140016856364864 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:41:00,411 opStructuredTracking 564 140016856364864 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:41:00,413 structuredTrackingWorkflow 564 140016856364864 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:41:01,116 __init__ 564 140016856364864 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI018_PROSTATE_TMA009/probabilities/imc/ilastik/ROI018_PROSTATE_TMA009_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.412482 seconds. Prediction took 3.076299 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.466401 seconds. Prediction took 2.634104 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.484613 seconds. Prediction took 2.93171 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1231, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 33.84314 seconds. Prediction took 6.025474 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.125616 seconds. Prediction took 2.375355 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.221732 seconds. Prediction took 2.031612 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1231, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.034104 seconds. Prediction took 1.441235 seconds. Subregion: start '[1010, 0, 0]' stop '[1219, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.8724 seconds. Prediction took 1.279896 seconds. Subregion: start '[1010, 504, 0]' stop '[1219, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 4.32239 seconds. Prediction took 0.247555 seconds. Subregion: start '[1010, 1008, 0]' stop '[1219, 1231, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI018_PROSTATE_TMA009/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI018_PROSTATE_TMA009/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI019_PROSTATE_Benign_TMA008N', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI019_PROSTATE_Benign_TMA008N/preprocessing/imc/ROI019_PROSTATE_Benign_TMA008N_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI019_PROSTATE_Benign_TMA008N/preprocessing/imc/ROI019_PROSTATE_Benign_TMA008N_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI019_PROSTATE_Benign_TMA008N/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI019_PROSTATE_Benign_TMA008N\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI019_PROSTATE_Benign_TMA008N/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI019_PROSTATE_Benign_TMA008N/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI019_PROSTATE_Benign_TMA008N/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:42:47,199 opConservationTracking 582 140040470304576 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:42:47,210 opStructuredTracking 582 140040470304576 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:42:47,212 structuredTrackingWorkflow 582 140040470304576 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:42:47,982 __init__ 582 140040470304576 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI019_PROSTATE_Benign_TMA008N/probabilities/imc/ilastik/ROI019_PROSTATE_Benign_TMA008N_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.262065 seconds. Prediction took 2.884201 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.720188 seconds. Prediction took 2.368745 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 30.783029 seconds. Prediction took 3.309399 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1320, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.504575 seconds. Prediction took 1.728001 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.809351 seconds. Prediction took 5.028152 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.111457 seconds. Prediction took 1.8558189999999999 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1320, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.443216 seconds. Prediction took 1.390577 seconds. Subregion: start '[1010, 0, 0]' stop '[1174, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 47.665803 seconds. Prediction took 0.766314 seconds. Subregion: start '[1010, 504, 0]' stop '[1174, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 4.510399 seconds. Prediction took 0.240728 seconds. Subregion: start '[1010, 1008, 0]' stop '[1174, 1320, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI019_PROSTATE_Benign_TMA008N/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI019_PROSTATE_Benign_TMA008N/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI020_PROSTATE_Benign_TMA011N', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI020_PROSTATE_Benign_TMA011N/preprocessing/imc/ROI020_PROSTATE_Benign_TMA011N_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI020_PROSTATE_Benign_TMA011N/preprocessing/imc/ROI020_PROSTATE_Benign_TMA011N_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI020_PROSTATE_Benign_TMA011N/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI020_PROSTATE_Benign_TMA011N\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI020_PROSTATE_Benign_TMA011N/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI020_PROSTATE_Benign_TMA011N/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI020_PROSTATE_Benign_TMA011N/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:44:34,893 opConservationTracking 600 139792128919360 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:44:34,905 opStructuredTracking 600 139792128919360 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:44:34,907 structuredTrackingWorkflow 600 139792128919360 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:44:35,612 __init__ 600 139792128919360 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI020_PROSTATE_Benign_TMA011N/probabilities/imc/ilastik/ROI020_PROSTATE_Benign_TMA011N_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 25.898914 seconds. Prediction took 4.496617 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1252, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 25.916903 seconds. Prediction took 4.489788 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 25.652124 seconds. Prediction took 5.371138 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.127992 seconds. Prediction took 4.339573 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.496552 seconds. Prediction took 4.983617 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.341754 seconds. Prediction took 1.5177209999999999 seconds. Subregion: start '[1010, 504, 0]' stop '[1131, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.304956 seconds. Prediction took 1.8657620000000001 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1252, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.781555 seconds. Prediction took 1.053674 seconds. Subregion: start '[1010, 0, 0]' stop '[1131, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.323683 seconds. Prediction took 0.159036 seconds. Subregion: start '[1010, 1008, 0]' stop '[1131, 1252, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI020_PROSTATE_Benign_TMA011N/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI020_PROSTATE_Benign_TMA011N/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI021_PROSTATE_TMA012', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI021_PROSTATE_TMA012/preprocessing/imc/ROI021_PROSTATE_TMA012_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI021_PROSTATE_TMA012/preprocessing/imc/ROI021_PROSTATE_TMA012_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI021_PROSTATE_TMA012/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI021_PROSTATE_TMA012\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI021_PROSTATE_TMA012/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI021_PROSTATE_TMA012/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI021_PROSTATE_TMA012/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:46:18,002 opConservationTracking 618 140614637979456 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:46:18,014 opStructuredTracking 618 140614637979456 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:46:18,016 structuredTrackingWorkflow 618 140614637979456 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:46:18,669 __init__ 618 140614637979456 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI021_PROSTATE_TMA012/probabilities/imc/ilastik/ROI021_PROSTATE_TMA012_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.100112 seconds. Prediction took 2.700132 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.244928 seconds. Prediction took 4.970705 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.235383 seconds. Prediction took 1.936588 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1258, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 35.72177 seconds. Prediction took 5.525237 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.043978 seconds. Prediction took 3.153565 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.226137 seconds. Prediction took 1.288167 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1258, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.929191 seconds. Prediction took 1.852463 seconds. Subregion: start '[1010, 0, 0]' stop '[1177, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.187483 seconds. Prediction took 0.461318 seconds. Subregion: start '[1010, 504, 0]' stop '[1177, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.253402 seconds. Prediction took 0.201696 seconds. Subregion: start '[1010, 1008, 0]' stop '[1177, 1258, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI021_PROSTATE_TMA012/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI021_PROSTATE_TMA012/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI022_PROSTATE_TMA013', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI022_PROSTATE_TMA013/preprocessing/imc/ROI022_PROSTATE_TMA013_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI022_PROSTATE_TMA013/preprocessing/imc/ROI022_PROSTATE_TMA013_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI022_PROSTATE_TMA013/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI022_PROSTATE_TMA013\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI022_PROSTATE_TMA013/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI022_PROSTATE_TMA013/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI022_PROSTATE_TMA013/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:48:02,118 opConservationTracking 636 140589070866240 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:48:02,132 opStructuredTracking 636 140589070866240 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:48:02,134 structuredTrackingWorkflow 636 140589070866240 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:48:02,872 __init__ 636 140589070866240 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI022_PROSTATE_TMA013/probabilities/imc/ilastik/ROI022_PROSTATE_TMA013_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.689838 seconds. Prediction took 3.306375 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.676263 seconds. Prediction took 4.60604 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.634136 seconds. Prediction took 4.590337 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1277, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 35.87159 seconds. Prediction took 3.184277 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.16351 seconds. Prediction took 2.713459 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.901452 seconds. Prediction took 3.110679 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1277, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.287432 seconds. Prediction took 1.069455 seconds. Subregion: start '[1010, 0, 0]' stop '[1161, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.840077 seconds. Prediction took 0.634594 seconds. Subregion: start '[1010, 504, 0]' stop '[1161, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 4.860144 seconds. Prediction took 0.21152 seconds. Subregion: start '[1010, 1008, 0]' stop '[1161, 1277, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI022_PROSTATE_TMA013/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI022_PROSTATE_TMA013/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI023_PROSTATE_TMA015', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI023_PROSTATE_TMA015/preprocessing/imc/ROI023_PROSTATE_TMA015_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI023_PROSTATE_TMA015/preprocessing/imc/ROI023_PROSTATE_TMA015_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI023_PROSTATE_TMA015/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI023_PROSTATE_TMA015\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI023_PROSTATE_TMA015/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI023_PROSTATE_TMA015/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI023_PROSTATE_TMA015/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:49:48,040 opConservationTracking 654 139859093026624 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:49:48,052 opStructuredTracking 654 139859093026624 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:49:48,054 structuredTrackingWorkflow 654 139859093026624 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:49:48,694 __init__ 654 139859093026624 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI023_PROSTATE_TMA015/probabilities/imc/ilastik/ROI023_PROSTATE_TMA015_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 25.659504 seconds. Prediction took 3.087812 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.036156 seconds. Prediction took 2.950161 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 30.52647 seconds. Prediction took 2.168303 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1296, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.465977 seconds. Prediction took 3.32012 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.981608 seconds. Prediction took 3.705808 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.906847 seconds. Prediction took 1.6015540000000001 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1296, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 48.38989 seconds. Prediction took 2.920185 seconds. Subregion: start '[1010, 0, 0]' stop '[1270, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 52.230803 seconds. Prediction took 1.136102 seconds. Subregion: start '[1010, 504, 0]' stop '[1270, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 5.072228 seconds. Prediction took 0.654323 seconds. Subregion: start '[1010, 1008, 0]' stop '[1270, 1296, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI023_PROSTATE_TMA015/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI023_PROSTATE_TMA015/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI024_PROSTATE_TMA016', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI024_PROSTATE_TMA016/preprocessing/imc/ROI024_PROSTATE_TMA016_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI024_PROSTATE_TMA016/preprocessing/imc/ROI024_PROSTATE_TMA016_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI024_PROSTATE_TMA016/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI024_PROSTATE_TMA016\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI024_PROSTATE_TMA016/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI024_PROSTATE_TMA016/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI024_PROSTATE_TMA016/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:51:42,486 opConservationTracking 672 139872059664192 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:51:42,497 opStructuredTracking 672 139872059664192 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:51:42,499 structuredTrackingWorkflow 672 139872059664192 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:51:43,166 __init__ 672 139872059664192 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI024_PROSTATE_TMA016/probabilities/imc/ilastik/ROI024_PROSTATE_TMA016_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.417083 seconds. Prediction took 2.689593 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.958356 seconds. Prediction took 2.506846 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.841439 seconds. Prediction took 4.318944 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1227, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.04237 seconds. Prediction took 3.379157 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.577015 seconds. Prediction took 2.805236 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.546439 seconds. Prediction took 1.123258 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1227, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.224143 seconds. Prediction took 1.344127 seconds. Subregion: start '[1010, 0, 0]' stop '[1213, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 48.488286 seconds. Prediction took 1.120406 seconds. Subregion: start '[1010, 504, 0]' stop '[1213, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 4.604182 seconds. Prediction took 0.358866 seconds. Subregion: start '[1010, 1008, 0]' stop '[1213, 1227, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI024_PROSTATE_TMA016/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI024_PROSTATE_TMA016/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI025_PROSTATE_TMA017', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI025_PROSTATE_TMA017/preprocessing/imc/ROI025_PROSTATE_TMA017_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI025_PROSTATE_TMA017/preprocessing/imc/ROI025_PROSTATE_TMA017_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI025_PROSTATE_TMA017/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI025_PROSTATE_TMA017\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI025_PROSTATE_TMA017/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI025_PROSTATE_TMA017/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI025_PROSTATE_TMA017/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:53:34,253 opConservationTracking 690 140446320527168 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:53:34,265 opStructuredTracking 690 140446320527168 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:53:34,267 structuredTrackingWorkflow 690 140446320527168 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:53:35,014 __init__ 690 140446320527168 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI025_PROSTATE_TMA017/probabilities/imc/ilastik/ROI025_PROSTATE_TMA017_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.825877 seconds. Prediction took 3.128678 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.990982 seconds. Prediction took 5.068314 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 35.738368 seconds. Prediction took 2.940099 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1249, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.154248 seconds. Prediction took 4.048136 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.997352 seconds. Prediction took 2.362318 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.448746 seconds. Prediction took 1.224388 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1249, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.647731 seconds. Prediction took 1.6497220000000001 seconds. Subregion: start '[1010, 0, 0]' stop '[1152, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 48.906585 seconds. Prediction took 1.010918 seconds. Subregion: start '[1010, 504, 0]' stop '[1152, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.344004 seconds. Prediction took 0.166578 seconds. Subregion: start '[1010, 1008, 0]' stop '[1152, 1249, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI025_PROSTATE_TMA017/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI025_PROSTATE_TMA017/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI026_PROSTATE_TMA018', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI026_PROSTATE_TMA018/preprocessing/imc/ROI026_PROSTATE_TMA018_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI026_PROSTATE_TMA018/preprocessing/imc/ROI026_PROSTATE_TMA018_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI026_PROSTATE_TMA018/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI026_PROSTATE_TMA018\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI026_PROSTATE_TMA018/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI026_PROSTATE_TMA018/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI026_PROSTATE_TMA018/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:55:25,247 opConservationTracking 708 140157652395840 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:55:25,261 opStructuredTracking 708 140157652395840 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:55:25,263 structuredTrackingWorkflow 708 140157652395840 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:55:25,896 __init__ 708 140157652395840 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI026_PROSTATE_TMA018/probabilities/imc/ilastik/ROI026_PROSTATE_TMA018_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.005396 seconds. Prediction took 0.280168 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1054, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.637254 seconds. Prediction took 3.890818 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 30.416654 seconds. Prediction took 0.155135 seconds. Subregion: start '[505, 1008, 0]' stop '[914, 1054, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 30.908825 seconds. Prediction took 2.782572 seconds. Subregion: start '[505, 0, 0]' stop '[914, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 31.464404 seconds. Prediction took 2.280279 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.377939 seconds. Prediction took 0.986537 seconds. Subregion: start '[505, 504, 0]' stop '[914, 1008, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI026_PROSTATE_TMA018/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI026_PROSTATE_TMA018/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI027_PROSTATE_TMA019', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI027_PROSTATE_TMA019/preprocessing/imc/ROI027_PROSTATE_TMA019_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI027_PROSTATE_TMA019/preprocessing/imc/ROI027_PROSTATE_TMA019_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI027_PROSTATE_TMA019/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI027_PROSTATE_TMA019\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI027_PROSTATE_TMA019/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI027_PROSTATE_TMA019/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI027_PROSTATE_TMA019/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:57:02,174 opConservationTracking 726 139936537630528 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:57:02,188 opStructuredTracking 726 139936537630528 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:57:02,190 structuredTrackingWorkflow 726 139936537630528 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:57:02,939 __init__ 726 139936537630528 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI027_PROSTATE_TMA019/probabilities/imc/ilastik/ROI027_PROSTATE_TMA019_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.60034 seconds. Prediction took 4.151172 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.233005 seconds. Prediction took 2.544 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 32.479969 seconds. Prediction took 3.740386 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1229, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.066394 seconds. Prediction took 5.16649 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.491968 seconds. Prediction took 2.45566 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.037493 seconds. Prediction took 1.179809 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1229, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 47.970004 seconds. Prediction took 1.386544 seconds. Subregion: start '[1010, 0, 0]' stop '[1164, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.2136 seconds. Prediction took 0.177933 seconds. Subregion: start '[1010, 1008, 0]' stop '[1164, 1229, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 50.25686 seconds. Prediction took 0.575022 seconds. Subregion: start '[1010, 504, 0]' stop '[1164, 1008, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI027_PROSTATE_TMA019/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI027_PROSTATE_TMA019/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI028_PROSTATE_TMA020', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI028_PROSTATE_TMA020/preprocessing/imc/ROI028_PROSTATE_TMA020_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI028_PROSTATE_TMA020/preprocessing/imc/ROI028_PROSTATE_TMA020_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI028_PROSTATE_TMA020/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI028_PROSTATE_TMA020\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI028_PROSTATE_TMA020/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI028_PROSTATE_TMA020/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI028_PROSTATE_TMA020/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 01:58:49,512 opConservationTracking 744 140637002729280 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:58:49,525 opStructuredTracking 744 140637002729280 Could not find any ILP solver\n",
      "WARNING 2023-01-13 01:58:49,527 structuredTrackingWorkflow 744 140637002729280 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 01:58:50,324 __init__ 744 140637002729280 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI028_PROSTATE_TMA020/probabilities/imc/ilastik/ROI028_PROSTATE_TMA020_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.870352 seconds. Prediction took 4.051041 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.305292 seconds. Prediction took 3.052902 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.450474 seconds. Prediction took 1.544534 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1293, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.201937 seconds. Prediction took 4.54819 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.060017 seconds. Prediction took 4.678931 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.883857 seconds. Prediction took 0.883093 seconds. Subregion: start '[1010, 0, 0]' stop '[1156, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.750629 seconds. Prediction took 1.442452 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1293, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 47.856766 seconds. Prediction took 0.705485 seconds. Subregion: start '[1010, 504, 0]' stop '[1156, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 4.274522 seconds. Prediction took 0.224099 seconds. Subregion: start '[1010, 1008, 0]' stop '[1156, 1293, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI028_PROSTATE_TMA020/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI028_PROSTATE_TMA020/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI029_PROSTATE_TMA022', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI029_PROSTATE_TMA022/preprocessing/imc/ROI029_PROSTATE_TMA022_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI029_PROSTATE_TMA022/preprocessing/imc/ROI029_PROSTATE_TMA022_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI029_PROSTATE_TMA022/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI029_PROSTATE_TMA022\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI029_PROSTATE_TMA022/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI029_PROSTATE_TMA022/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI029_PROSTATE_TMA022/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:00:37,277 opConservationTracking 762 140461777237824 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:00:37,289 opStructuredTracking 762 140461777237824 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:00:37,291 structuredTrackingWorkflow 762 140461777237824 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:00:38,051 __init__ 762 140461777237824 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI029_PROSTATE_TMA022/probabilities/imc/ilastik/ROI029_PROSTATE_TMA022_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.406182 seconds. Prediction took 4.107074 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 25.148017 seconds. Prediction took 3.913183 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.330163 seconds. Prediction took 3.880991 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1260, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 34.833631 seconds. Prediction took 5.7745619999999995 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.87718 seconds. Prediction took 2.593203 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.492311 seconds. Prediction took 1.959945 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1260, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.729588 seconds. Prediction took 0.843158 seconds. Subregion: start '[1010, 0, 0]' stop '[1240, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 48.446274 seconds. Prediction took 1.271781 seconds. Subregion: start '[1010, 504, 0]' stop '[1240, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 4.806149 seconds. Prediction took 0.261238 seconds. Subregion: start '[1010, 1008, 0]' stop '[1240, 1260, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI029_PROSTATE_TMA022/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI029_PROSTATE_TMA022/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI030_PROSTATE_TMA023', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI030_PROSTATE_TMA023/preprocessing/imc/ROI030_PROSTATE_TMA023_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI030_PROSTATE_TMA023/preprocessing/imc/ROI030_PROSTATE_TMA023_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI030_PROSTATE_TMA023/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI030_PROSTATE_TMA023\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI030_PROSTATE_TMA023/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI030_PROSTATE_TMA023/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI030_PROSTATE_TMA023/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:02:27,223 opConservationTracking 780 139774070142784 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:02:27,234 opStructuredTracking 780 139774070142784 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:02:27,236 structuredTrackingWorkflow 780 139774070142784 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:02:27,926 __init__ 780 139774070142784 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI030_PROSTATE_TMA023/probabilities/imc/ilastik/ROI030_PROSTATE_TMA023_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.557508 seconds. Prediction took 3.112868 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.744612 seconds. Prediction took 2.578688 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1256, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.100212 seconds. Prediction took 2.678659 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 35.803776 seconds. Prediction took 3.269728 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.364616 seconds. Prediction took 3.5119350000000003 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.290511 seconds. Prediction took 3.455897 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1256, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.257401 seconds. Prediction took 1.831273 seconds. Subregion: start '[1010, 0, 0]' stop '[1227, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 48.1178 seconds. Prediction took 1.58681 seconds. Subregion: start '[1010, 504, 0]' stop '[1227, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.914713 seconds. Prediction took 0.283332 seconds. Subregion: start '[1010, 1008, 0]' stop '[1227, 1256, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI030_PROSTATE_TMA023/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI030_PROSTATE_TMA023/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI031_PROSTATE_TMA024', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI031_PROSTATE_TMA024/preprocessing/imc/ROI031_PROSTATE_TMA024_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI031_PROSTATE_TMA024/preprocessing/imc/ROI031_PROSTATE_TMA024_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI031_PROSTATE_TMA024/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI031_PROSTATE_TMA024\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI031_PROSTATE_TMA024/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI031_PROSTATE_TMA024/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI031_PROSTATE_TMA024/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:04:15,430 opConservationTracking 798 140599449175872 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:04:15,442 opStructuredTracking 798 140599449175872 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:04:15,444 structuredTrackingWorkflow 798 140599449175872 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:04:16,138 __init__ 798 140599449175872 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI031_PROSTATE_TMA024/probabilities/imc/ilastik/ROI031_PROSTATE_TMA024_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 22.032644 seconds. Prediction took 3.10916 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 25.1379 seconds. Prediction took 2.939558 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.342359 seconds. Prediction took 6.602359 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1214, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 33.388169 seconds. Prediction took 4.516505 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.818574 seconds. Prediction took 2.811708 seconds. Subregion: start '[1010, 0, 0]' stop '[1120, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.404375 seconds. Prediction took 3.243762 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.679065 seconds. Prediction took 1.3601809999999999 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1214, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.872727 seconds. Prediction took 0.642418 seconds. Subregion: start '[1010, 504, 0]' stop '[1120, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.02982 seconds. Prediction took 0.103275 seconds. Subregion: start '[1010, 1008, 0]' stop '[1120, 1214, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI031_PROSTATE_TMA024/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI031_PROSTATE_TMA024/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI032_PROSTATE_TMA025', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI032_PROSTATE_TMA025/preprocessing/imc/ROI032_PROSTATE_TMA025_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI032_PROSTATE_TMA025/preprocessing/imc/ROI032_PROSTATE_TMA025_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI032_PROSTATE_TMA025/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI032_PROSTATE_TMA025\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI032_PROSTATE_TMA025/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI032_PROSTATE_TMA025/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI032_PROSTATE_TMA025/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:05:57,788 opConservationTracking 816 139639149741888 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:05:57,800 opStructuredTracking 816 139639149741888 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:05:57,802 structuredTrackingWorkflow 816 139639149741888 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:05:58,442 __init__ 816 139639149741888 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI032_PROSTATE_TMA025/probabilities/imc/ilastik/ROI032_PROSTATE_TMA025_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.15076 seconds. Prediction took 5.746886 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.195112 seconds. Prediction took 6.55451 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.954317 seconds. Prediction took 2.285337 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1254, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 33.962042 seconds. Prediction took 2.203392 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.031701 seconds. Prediction took 4.837436 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1254, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.879531 seconds. Prediction took 4.011751 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.797315 seconds. Prediction took 1.822969 seconds. Subregion: start '[1010, 0, 0]' stop '[1201, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 47.774163 seconds. Prediction took 0.986329 seconds. Subregion: start '[1010, 504, 0]' stop '[1201, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.923399 seconds. Prediction took 0.225564 seconds. Subregion: start '[1010, 1008, 0]' stop '[1201, 1254, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI032_PROSTATE_TMA025/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI032_PROSTATE_TMA025/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI033_PROSTATE_TMA026', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI033_PROSTATE_TMA026/preprocessing/imc/ROI033_PROSTATE_TMA026_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI033_PROSTATE_TMA026/preprocessing/imc/ROI033_PROSTATE_TMA026_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI033_PROSTATE_TMA026/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI033_PROSTATE_TMA026\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI033_PROSTATE_TMA026/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI033_PROSTATE_TMA026/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI033_PROSTATE_TMA026/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:07:46,453 opConservationTracking 834 140645542455104 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:07:46,464 opStructuredTracking 834 140645542455104 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:07:46,467 structuredTrackingWorkflow 834 140645542455104 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:07:47,117 __init__ 834 140645542455104 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI033_PROSTATE_TMA026/probabilities/imc/ilastik/ROI033_PROSTATE_TMA026_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.427122 seconds. Prediction took 2.8773999999999997 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 25.342421 seconds. Prediction took 3.457457 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.786343 seconds. Prediction took 1.485436 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1248, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 36.719283 seconds. Prediction took 3.126359 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.176859 seconds. Prediction took 2.429355 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 12.536126 seconds. Prediction took 28.08806 seconds. Subregion: start '[1010, 0, 0]' stop '[1041, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 2.831374 seconds. Prediction took 0.07851 seconds. Subregion: start '[1010, 1008, 0]' stop '[1041, 1248, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.742777 seconds. Prediction took 1.06823 seconds. Subregion: start '[1010, 504, 0]' stop '[1041, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.848637 seconds. Prediction took 0.650219 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1248, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI033_PROSTATE_TMA026/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI033_PROSTATE_TMA026/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI034_PROSTATE_TMA027', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI034_PROSTATE_TMA027/preprocessing/imc/ROI034_PROSTATE_TMA027_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI034_PROSTATE_TMA027/preprocessing/imc/ROI034_PROSTATE_TMA027_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI034_PROSTATE_TMA027/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI034_PROSTATE_TMA027\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI034_PROSTATE_TMA027/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI034_PROSTATE_TMA027/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI034_PROSTATE_TMA027/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:09:27,953 opConservationTracking 852 140273124226880 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:09:27,963 opStructuredTracking 852 140273124226880 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:09:27,965 structuredTrackingWorkflow 852 140273124226880 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:09:28,607 __init__ 852 140273124226880 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI034_PROSTATE_TMA027/probabilities/imc/ilastik/ROI034_PROSTATE_TMA027_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 504, 505, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.591125 seconds. Prediction took 3.8489750000000003 seconds. Subregion: start '[0, 505, 0]' stop '[504, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.725743 seconds. Prediction took 2.806959 seconds. Subregion: start '[0, 0, 0]' stop '[504, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 31.726456 seconds. Prediction took 0.915148 seconds. Subregion: start '[0, 1010, 0]' stop '[504, 1097, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 36.105883 seconds. Prediction took 4.506995 seconds. Subregion: start '[504, 0, 0]' stop '[1008, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.753595 seconds. Prediction took 0.604002 seconds. Subregion: start '[504, 1010, 0]' stop '[1008, 1097, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.504822 seconds. Prediction took 3.782024 seconds. Subregion: start '[504, 505, 0]' stop '[1008, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.249306 seconds. Prediction took 0.958782 seconds. Subregion: start '[1008, 0, 0]' stop '[1188, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.647768 seconds. Prediction took 0.988639 seconds. Subregion: start '[1008, 505, 0]' stop '[1188, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.034481 seconds. Prediction took 0.089941 seconds. Subregion: start '[1008, 1010, 0]' stop '[1188, 1097, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI034_PROSTATE_TMA027/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI034_PROSTATE_TMA027/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI035_PROSTATE_Benign_TMA027N', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI035_PROSTATE_Benign_TMA027N/preprocessing/imc/ROI035_PROSTATE_Benign_TMA027N_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI035_PROSTATE_Benign_TMA027N/preprocessing/imc/ROI035_PROSTATE_Benign_TMA027N_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI035_PROSTATE_Benign_TMA027N/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI035_PROSTATE_Benign_TMA027N\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI035_PROSTATE_Benign_TMA027N/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI035_PROSTATE_Benign_TMA027N/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI035_PROSTATE_Benign_TMA027N/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:11:12,534 opConservationTracking 870 140553893803840 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:11:12,546 opStructuredTracking 870 140553893803840 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:11:12,548 structuredTrackingWorkflow 870 140553893803840 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:11:13,193 __init__ 870 140553893803840 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI035_PROSTATE_Benign_TMA027N/probabilities/imc/ilastik/ROI035_PROSTATE_Benign_TMA027N_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 504, 505, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 13.433979 seconds. Prediction took 0.196894 seconds. Subregion: start '[1008, 505, 0]' stop '[1067, 781, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 34.495213 seconds. Prediction took 3.18058 seconds. Subregion: start '[0, 505, 0]' stop '[504, 781, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 36.149825 seconds. Prediction took 3.089833 seconds. Subregion: start '[0, 0, 0]' stop '[504, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.726508 seconds. Prediction took 3.285707 seconds. Subregion: start '[504, 0, 0]' stop '[1008, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.00178 seconds. Prediction took 1.113272 seconds. Subregion: start '[504, 505, 0]' stop '[1008, 781, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.982331 seconds. Prediction took 0.139118 seconds. Subregion: start '[1008, 0, 0]' stop '[1067, 505, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI035_PROSTATE_Benign_TMA027N/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI035_PROSTATE_Benign_TMA027N/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI036_PROSTATE_Benign_TMA028N', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI036_PROSTATE_Benign_TMA028N/preprocessing/imc/ROI036_PROSTATE_Benign_TMA028N_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI036_PROSTATE_Benign_TMA028N/preprocessing/imc/ROI036_PROSTATE_Benign_TMA028N_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI036_PROSTATE_Benign_TMA028N/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI036_PROSTATE_Benign_TMA028N\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI036_PROSTATE_Benign_TMA028N/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI036_PROSTATE_Benign_TMA028N/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI036_PROSTATE_Benign_TMA028N/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:12:55,641 opConservationTracking 888 139988849125184 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:12:55,657 opStructuredTracking 888 139988849125184 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:12:55,659 structuredTrackingWorkflow 888 139988849125184 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:12:56,400 __init__ 888 139988849125184 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI036_PROSTATE_Benign_TMA028N/probabilities/imc/ilastik/ROI036_PROSTATE_Benign_TMA028N_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 19.090915 seconds. Prediction took 2.668153 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 20.191784 seconds. Prediction took 2.480261 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 20.361967 seconds. Prediction took 2.625251 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1162, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.754752 seconds. Prediction took 1.386253 seconds. Subregion: start '[505, 0, 0]' stop '[729, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.971235 seconds. Prediction took 1.265702 seconds. Subregion: start '[505, 504, 0]' stop '[729, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.229435 seconds. Prediction took 0.161341 seconds. Subregion: start '[505, 1008, 0]' stop '[729, 1162, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI036_PROSTATE_Benign_TMA028N/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI036_PROSTATE_Benign_TMA028N/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI037_PROSTATE_TMA028', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI037_PROSTATE_TMA028/preprocessing/imc/ROI037_PROSTATE_TMA028_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI037_PROSTATE_TMA028/preprocessing/imc/ROI037_PROSTATE_TMA028_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI037_PROSTATE_TMA028/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI037_PROSTATE_TMA028\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI037_PROSTATE_TMA028/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI037_PROSTATE_TMA028/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI037_PROSTATE_TMA028/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:14:21,234 opConservationTracking 906 140251467065152 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:14:21,246 opStructuredTracking 906 140251467065152 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:14:21,248 structuredTrackingWorkflow 906 140251467065152 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:14:21,932 __init__ 906 140251467065152 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI037_PROSTATE_TMA028/probabilities/imc/ilastik/ROI037_PROSTATE_TMA028_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.525906 seconds. Prediction took 3.8888160000000003 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.306667 seconds. Prediction took 3.620546 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.507218 seconds. Prediction took 2.05793 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1300, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 36.25494 seconds. Prediction took 5.779089 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.28173 seconds. Prediction took 2.654846 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.188684 seconds. Prediction took 1.776077 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1300, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.200643 seconds. Prediction took 1.243975 seconds. Subregion: start '[1010, 0, 0]' stop '[1112, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.925138 seconds. Prediction took 0.966456 seconds. Subregion: start '[1010, 504, 0]' stop '[1112, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.044444 seconds. Prediction took 0.157275 seconds. Subregion: start '[1010, 1008, 0]' stop '[1112, 1300, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI037_PROSTATE_TMA028/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI037_PROSTATE_TMA028/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI038_PROSTATE_TMA030', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI038_PROSTATE_TMA030/preprocessing/imc/ROI038_PROSTATE_TMA030_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI038_PROSTATE_TMA030/preprocessing/imc/ROI038_PROSTATE_TMA030_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI038_PROSTATE_TMA030/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI038_PROSTATE_TMA030\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI038_PROSTATE_TMA030/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI038_PROSTATE_TMA030/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI038_PROSTATE_TMA030/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:16:05,417 opConservationTracking 924 139927036430144 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:16:05,429 opStructuredTracking 924 139927036430144 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:16:05,431 structuredTrackingWorkflow 924 139927036430144 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:16:06,205 __init__ 924 139927036430144 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI038_PROSTATE_TMA030/probabilities/imc/ilastik/ROI038_PROSTATE_TMA030_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 15.242609999999999 seconds. Prediction took 1.6156760000000001 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1222, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.953985 seconds. Prediction took 4.420664 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 34.458279 seconds. Prediction took 4.549697 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.29318 seconds. Prediction took 4.58517 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.796005 seconds. Prediction took 3.171086 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.736124 seconds. Prediction took 0.802924 seconds. Subregion: start '[1010, 0, 0]' stop '[1130, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.891649 seconds. Prediction took 1.050465 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1222, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.111668 seconds. Prediction took 0.646481 seconds. Subregion: start '[1010, 504, 0]' stop '[1130, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 2.829468 seconds. Prediction took 0.136705 seconds. Subregion: start '[1010, 1008, 0]' stop '[1130, 1222, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI038_PROSTATE_TMA030/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI038_PROSTATE_TMA030/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI039_PROSTATE_TMA031', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI039_PROSTATE_TMA031/preprocessing/imc/ROI039_PROSTATE_TMA031_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI039_PROSTATE_TMA031/preprocessing/imc/ROI039_PROSTATE_TMA031_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI039_PROSTATE_TMA031/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI039_PROSTATE_TMA031\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI039_PROSTATE_TMA031/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI039_PROSTATE_TMA031/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI039_PROSTATE_TMA031/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:17:50,880 opConservationTracking 942 140636389525312 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:17:50,891 opStructuredTracking 942 140636389525312 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:17:50,894 structuredTrackingWorkflow 942 140636389525312 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:17:51,605 __init__ 942 140636389525312 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI039_PROSTATE_TMA031/probabilities/imc/ilastik/ROI039_PROSTATE_TMA031_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 16.614409 seconds. Prediction took 5.443376 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1045, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 22.391652 seconds. Prediction took 3.887344 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 22.830354 seconds. Prediction took 3.601517 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 34.36735 seconds. Prediction took 0.150832 seconds. Subregion: start '[1010, 0, 0]' stop '[1017, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 32.449161 seconds. Prediction took 3.109272 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 4.500714 seconds. Prediction took 2.038091 seconds. Subregion: start '[1010, 1008, 0]' stop '[1017, 1045, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.58248 seconds. Prediction took 0.182653 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1045, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.653161 seconds. Prediction took 0.099944 seconds. Subregion: start '[1010, 504, 0]' stop '[1017, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 35.820862 seconds. Prediction took 1.950441 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI039_PROSTATE_TMA031/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI039_PROSTATE_TMA031/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI040_PROSTATE_TMA032', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI040_PROSTATE_TMA032/preprocessing/imc/ROI040_PROSTATE_TMA032_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI040_PROSTATE_TMA032/preprocessing/imc/ROI040_PROSTATE_TMA032_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI040_PROSTATE_TMA032/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI040_PROSTATE_TMA032\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI040_PROSTATE_TMA032/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI040_PROSTATE_TMA032/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI040_PROSTATE_TMA032/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:19:25,709 opConservationTracking 960 140648592856896 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:19:25,721 opStructuredTracking 960 140648592856896 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:19:25,723 structuredTrackingWorkflow 960 140648592856896 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:19:26,422 __init__ 960 140648592856896 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI040_PROSTATE_TMA032/probabilities/imc/ilastik/ROI040_PROSTATE_TMA032_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 20.405665 seconds. Prediction took 4.030083 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 22.318546 seconds. Prediction took 7.299781 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.833501 seconds. Prediction took 3.2304209999999998 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1233, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 32.318397 seconds. Prediction took 6.167678 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.976437 seconds. Prediction took 2.09399 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.894565 seconds. Prediction took 1.20418 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1233, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.41174 seconds. Prediction took 1.464414 seconds. Subregion: start '[1010, 0, 0]' stop '[1226, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.217632 seconds. Prediction took 1.04914 seconds. Subregion: start '[1010, 504, 0]' stop '[1226, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 4.131507 seconds. Prediction took 0.250985 seconds. Subregion: start '[1010, 1008, 0]' stop '[1226, 1233, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI040_PROSTATE_TMA032/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI040_PROSTATE_TMA032/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI041_PROSTATE_TMA033', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI041_PROSTATE_TMA033/preprocessing/imc/ROI041_PROSTATE_TMA033_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI041_PROSTATE_TMA033/preprocessing/imc/ROI041_PROSTATE_TMA033_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI041_PROSTATE_TMA033/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI041_PROSTATE_TMA033\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI041_PROSTATE_TMA033/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI041_PROSTATE_TMA033/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI041_PROSTATE_TMA033/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:21:10,072 opConservationTracking 978 140528377268032 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:21:10,083 opStructuredTracking 978 140528377268032 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:21:10,085 structuredTrackingWorkflow 978 140528377268032 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:21:10,735 __init__ 978 140528377268032 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI041_PROSTATE_TMA033/probabilities/imc/ilastik/ROI041_PROSTATE_TMA033_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 504, 505, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.699051 seconds. Prediction took 1.8760270000000001 seconds. Subregion: start '[0, 0, 0]' stop '[504, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.940837 seconds. Prediction took 3.418215 seconds. Subregion: start '[0, 505, 0]' stop '[504, 818, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 33.221892 seconds. Prediction took 3.423289 seconds. Subregion: start '[504, 505, 0]' stop '[1008, 818, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 34.153168 seconds. Prediction took 2.882526 seconds. Subregion: start '[504, 0, 0]' stop '[1008, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 36.24419 seconds. Prediction took 1.117184 seconds. Subregion: start '[1008, 0, 0]' stop '[1164, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.662686 seconds. Prediction took 0.265237 seconds. Subregion: start '[1008, 505, 0]' stop '[1164, 818, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI041_PROSTATE_TMA033/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI041_PROSTATE_TMA033/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI042_PROSTATE_TMA034', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI042_PROSTATE_TMA034/preprocessing/imc/ROI042_PROSTATE_TMA034_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI042_PROSTATE_TMA034/preprocessing/imc/ROI042_PROSTATE_TMA034_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI042_PROSTATE_TMA034/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI042_PROSTATE_TMA034\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI042_PROSTATE_TMA034/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI042_PROSTATE_TMA034/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI042_PROSTATE_TMA034/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:22:46,294 opConservationTracking 996 140235117987648 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:22:46,306 opStructuredTracking 996 140235117987648 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:22:46,308 structuredTrackingWorkflow 996 140235117987648 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:22:46,965 __init__ 996 140235117987648 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI042_PROSTATE_TMA034/probabilities/imc/ilastik/ROI042_PROSTATE_TMA034_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 19.597226 seconds. Prediction took 3.934324 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 21.17868 seconds. Prediction took 2.576418 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.616359 seconds. Prediction took 2.051074 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1144, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 30.547047 seconds. Prediction took 2.707373 seconds. Subregion: start '[505, 0, 0]' stop '[945, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 33.328387 seconds. Prediction took 1.322004 seconds. Subregion: start '[505, 1008, 0]' stop '[945, 1144, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 33.66437 seconds. Prediction took 1.774242 seconds. Subregion: start '[505, 504, 0]' stop '[945, 1008, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI042_PROSTATE_TMA034/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI042_PROSTATE_TMA034/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI043_PROSTATE_TMA035', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI043_PROSTATE_TMA035/preprocessing/imc/ROI043_PROSTATE_TMA035_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI043_PROSTATE_TMA035/preprocessing/imc/ROI043_PROSTATE_TMA035_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI043_PROSTATE_TMA035/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI043_PROSTATE_TMA035\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI043_PROSTATE_TMA035/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI043_PROSTATE_TMA035/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI043_PROSTATE_TMA035/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:24:19,933 opConservationTracking 1014 139668806047552 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:24:19,944 opStructuredTracking 1014 139668806047552 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:24:19,947 structuredTrackingWorkflow 1014 139668806047552 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:24:20,693 __init__ 1014 139668806047552 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI043_PROSTATE_TMA035/probabilities/imc/ilastik/ROI043_PROSTATE_TMA035_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 25.514446 seconds. Prediction took 2.323536 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.391061 seconds. Prediction took 3.250243 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 30.637244 seconds. Prediction took 3.856261 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1223, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.601727 seconds. Prediction took 2.685096 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.981619 seconds. Prediction took 3.8192209999999998 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.081349 seconds. Prediction took 0.915334 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1223, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.017485 seconds. Prediction took 1.20598 seconds. Subregion: start '[1010, 0, 0]' stop '[1087, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.015124 seconds. Prediction took 0.632223 seconds. Subregion: start '[1010, 504, 0]' stop '[1087, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 1.883626 seconds. Prediction took 0.097909 seconds. Subregion: start '[1010, 1008, 0]' stop '[1087, 1223, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI043_PROSTATE_TMA035/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI043_PROSTATE_TMA035/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI044_PROSTATE_TMA036', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI044_PROSTATE_TMA036/preprocessing/imc/ROI044_PROSTATE_TMA036_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI044_PROSTATE_TMA036/preprocessing/imc/ROI044_PROSTATE_TMA036_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI044_PROSTATE_TMA036/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI044_PROSTATE_TMA036\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI044_PROSTATE_TMA036/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI044_PROSTATE_TMA036/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI044_PROSTATE_TMA036/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:26:05,048 opConservationTracking 1032 139997061769024 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:26:05,059 opStructuredTracking 1032 139997061769024 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:26:05,061 structuredTrackingWorkflow 1032 139997061769024 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:26:05,704 __init__ 1032 139997061769024 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI044_PROSTATE_TMA036/probabilities/imc/ilastik/ROI044_PROSTATE_TMA036_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 504, 505, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 20.701765 seconds. Prediction took 3.331411 seconds. Subregion: start '[0, 1010, 0]' stop '[504, 1072, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 21.857475 seconds. Prediction took 2.6619960000000003 seconds. Subregion: start '[0, 0, 0]' stop '[504, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 20.665263 seconds. Prediction took 4.333885 seconds. Subregion: start '[0, 505, 0]' stop '[504, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 32.35296 seconds. Prediction took 0.495014 seconds. Subregion: start '[504, 1010, 0]' stop '[1008, 1072, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 32.841544999999996 seconds. Prediction took 2.999407 seconds. Subregion: start '[504, 0, 0]' stop '[1008, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 32.84308 seconds. Prediction took 3.51455 seconds. Subregion: start '[504, 505, 0]' stop '[1008, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.599805 seconds. Prediction took 1.069523 seconds. Subregion: start '[1008, 0, 0]' stop '[1113, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.632767 seconds. Prediction took 0.906816 seconds. Subregion: start '[1008, 505, 0]' stop '[1113, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.030029 seconds. Prediction took 0.053155 seconds. Subregion: start '[1008, 1010, 0]' stop '[1113, 1072, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI044_PROSTATE_TMA036/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI044_PROSTATE_TMA036/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI045_PROSTATE_TMA038', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI045_PROSTATE_TMA038/preprocessing/imc/ROI045_PROSTATE_TMA038_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI045_PROSTATE_TMA038/preprocessing/imc/ROI045_PROSTATE_TMA038_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI045_PROSTATE_TMA038/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI045_PROSTATE_TMA038\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI045_PROSTATE_TMA038/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI045_PROSTATE_TMA038/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI045_PROSTATE_TMA038/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:27:41,453 opConservationTracking 1050 140628080379712 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:27:41,465 opStructuredTracking 1050 140628080379712 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:27:41,467 structuredTrackingWorkflow 1050 140628080379712 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:27:42,118 __init__ 1050 140628080379712 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI045_PROSTATE_TMA038/probabilities/imc/ilastik/ROI045_PROSTATE_TMA038_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 504, 505, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.623523 seconds. Prediction took 3.264635 seconds. Subregion: start '[0, 0, 0]' stop '[504, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.866902 seconds. Prediction took 3.423099 seconds. Subregion: start '[0, 505, 0]' stop '[504, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.527491 seconds. Prediction took 4.139949 seconds. Subregion: start '[0, 1010, 0]' stop '[504, 1251, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.198819 seconds. Prediction took 3.431209 seconds. Subregion: start '[504, 0, 0]' stop '[1008, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.05999 seconds. Prediction took 2.9390140000000002 seconds. Subregion: start '[504, 1010, 0]' stop '[1008, 1251, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.951922 seconds. Prediction took 4.229459 seconds. Subregion: start '[504, 505, 0]' stop '[1008, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 49.315212 seconds. Prediction took 4.169529 seconds. Subregion: start '[1008, 0, 0]' stop '[1331, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 52.428552 seconds. Prediction took 1.5200040000000001 seconds. Subregion: start '[1008, 505, 0]' stop '[1331, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 7.9817219999999995 seconds. Prediction took 0.35838 seconds. Subregion: start '[1008, 1010, 0]' stop '[1331, 1251, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI045_PROSTATE_TMA038/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI045_PROSTATE_TMA038/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI046_PROSTATE_TMA039', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI046_PROSTATE_TMA039/preprocessing/imc/ROI046_PROSTATE_TMA039_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI046_PROSTATE_TMA039/preprocessing/imc/ROI046_PROSTATE_TMA039_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI046_PROSTATE_TMA039/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI046_PROSTATE_TMA039\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI046_PROSTATE_TMA039/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI046_PROSTATE_TMA039/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI046_PROSTATE_TMA039/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:29:33,382 opConservationTracking 1068 139769410508608 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:29:33,394 opStructuredTracking 1068 139769410508608 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:29:33,396 structuredTrackingWorkflow 1068 139769410508608 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:29:34,072 __init__ 1068 139769410508608 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI046_PROSTATE_TMA039/probabilities/imc/ilastik/ROI046_PROSTATE_TMA039_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 18.069172 seconds. Prediction took 8.082266 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1034, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.614941 seconds. Prediction took 6.512909 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 31.673303 seconds. Prediction took 4.867689 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.371207 seconds. Prediction took 0.115314 seconds. Subregion: start '[505, 1008, 0]' stop '[976, 1034, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 34.964311 seconds. Prediction took 4.758613 seconds. Subregion: start '[505, 0, 0]' stop '[976, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.437281 seconds. Prediction took 1.342999 seconds. Subregion: start '[505, 504, 0]' stop '[976, 1008, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI046_PROSTATE_TMA039/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI046_PROSTATE_TMA039/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI047_PROSTATE_TMA041', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI047_PROSTATE_TMA041/preprocessing/imc/ROI047_PROSTATE_TMA041_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI047_PROSTATE_TMA041/preprocessing/imc/ROI047_PROSTATE_TMA041_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI047_PROSTATE_TMA041/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI047_PROSTATE_TMA041\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI047_PROSTATE_TMA041/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI047_PROSTATE_TMA041/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI047_PROSTATE_TMA041/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:31:12,970 opConservationTracking 1086 140630519351104 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:31:12,982 opStructuredTracking 1086 140630519351104 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:31:12,984 structuredTrackingWorkflow 1086 140630519351104 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:31:13,641 __init__ 1086 140630519351104 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI047_PROSTATE_TMA041/probabilities/imc/ilastik/ROI047_PROSTATE_TMA041_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 504, 505, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 15.978208 seconds. Prediction took 2.183753 seconds. Subregion: start '[0, 0, 0]' stop '[504, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 16.17827 seconds. Prediction took 2.975164 seconds. Subregion: start '[0, 505, 0]' stop '[504, 785, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.109764 seconds. Prediction took 0.540014 seconds. Subregion: start '[1008, 0, 0]' stop '[1112, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.060202 seconds. Prediction took 0.242103 seconds. Subregion: start '[1008, 505, 0]' stop '[1112, 785, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 25.000534 seconds. Prediction took 1.450239 seconds. Subregion: start '[504, 505, 0]' stop '[1008, 785, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.755367 seconds. Prediction took 1.528927 seconds. Subregion: start '[504, 0, 0]' stop '[1008, 505, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI047_PROSTATE_TMA041/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI047_PROSTATE_TMA041/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI048_PROSTATE_TMA042', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI048_PROSTATE_TMA042/preprocessing/imc/ROI048_PROSTATE_TMA042_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI048_PROSTATE_TMA042/preprocessing/imc/ROI048_PROSTATE_TMA042_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI048_PROSTATE_TMA042/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI048_PROSTATE_TMA042\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI048_PROSTATE_TMA042/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI048_PROSTATE_TMA042/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI048_PROSTATE_TMA042/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:32:38,773 opConservationTracking 1104 140657276929856 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:32:38,785 opStructuredTracking 1104 140657276929856 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:32:38,787 structuredTrackingWorkflow 1104 140657276929856 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:32:39,440 __init__ 1104 140657276929856 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI048_PROSTATE_TMA042/probabilities/imc/ilastik/ROI048_PROSTATE_TMA042_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.592299 seconds. Prediction took 3.250092 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.427505 seconds. Prediction took 2.141807 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1182, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 30.035612 seconds. Prediction took 3.484913 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.551917 seconds. Prediction took 2.923793 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.411573 seconds. Prediction took 2.158511 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.559364 seconds. Prediction took 3.102726 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1182, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.547242 seconds. Prediction took 0.604611 seconds. Subregion: start '[1010, 0, 0]' stop '[1101, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 47.131502 seconds. Prediction took 0.588501 seconds. Subregion: start '[1010, 504, 0]' stop '[1101, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 1.862721 seconds. Prediction took 0.094635 seconds. Subregion: start '[1010, 1008, 0]' stop '[1101, 1182, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI048_PROSTATE_TMA042/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI048_PROSTATE_TMA042/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI049_PROSTATE_TMA044', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI049_PROSTATE_TMA044/preprocessing/imc/ROI049_PROSTATE_TMA044_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI049_PROSTATE_TMA044/preprocessing/imc/ROI049_PROSTATE_TMA044_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI049_PROSTATE_TMA044/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI049_PROSTATE_TMA044\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI049_PROSTATE_TMA044/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI049_PROSTATE_TMA044/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI049_PROSTATE_TMA044/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:34:22,624 opConservationTracking 1122 139964288661312 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:34:22,635 opStructuredTracking 1122 139964288661312 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:34:22,638 structuredTrackingWorkflow 1122 139964288661312 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:34:23,241 __init__ 1122 139964288661312 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI049_PROSTATE_TMA044/probabilities/imc/ilastik/ROI049_PROSTATE_TMA044_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 32.129453 seconds. Prediction took 2.8844 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1178, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 32.394393 seconds. Prediction took 5.477629 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 36.16863 seconds. Prediction took 4.020302 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.530566 seconds. Prediction took 4.393774 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.280164 seconds. Prediction took 2.107104 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 48.64393 seconds. Prediction took 0.778612 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1178, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 51.266078 seconds. Prediction took 0.864234 seconds. Subregion: start '[1010, 0, 0]' stop '[1134, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 52.107624 seconds. Prediction took 1.033192 seconds. Subregion: start '[1010, 504, 0]' stop '[1134, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.26007 seconds. Prediction took 0.113627 seconds. Subregion: start '[1010, 1008, 0]' stop '[1134, 1178, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI049_PROSTATE_TMA044/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI049_PROSTATE_TMA044/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI050_PROSTATE_TMA045', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI050_PROSTATE_TMA045/preprocessing/imc/ROI050_PROSTATE_TMA045_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI050_PROSTATE_TMA045/preprocessing/imc/ROI050_PROSTATE_TMA045_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI050_PROSTATE_TMA045/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI050_PROSTATE_TMA045\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI050_PROSTATE_TMA045/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI050_PROSTATE_TMA045/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI050_PROSTATE_TMA045/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:36:09,615 opConservationTracking 1140 139842910263104 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:36:09,627 opStructuredTracking 1140 139842910263104 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:36:09,630 structuredTrackingWorkflow 1140 139842910263104 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:36:10,232 __init__ 1140 139842910263104 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI050_PROSTATE_TMA045/probabilities/imc/ilastik/ROI050_PROSTATE_TMA045_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 504, 505, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.235077 seconds. Prediction took 3.782277 seconds. Subregion: start '[0, 0, 0]' stop '[504, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.422923 seconds. Prediction took 0.972715 seconds. Subregion: start '[0, 1010, 0]' stop '[504, 1237, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.010284 seconds. Prediction took 2.116494 seconds. Subregion: start '[0, 505, 0]' stop '[504, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 34.924246 seconds. Prediction took 7.957286 seconds. Subregion: start '[504, 0, 0]' stop '[1008, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.19868 seconds. Prediction took 2.29161 seconds. Subregion: start '[504, 1010, 0]' stop '[1008, 1237, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.117689 seconds. Prediction took 4.696414 seconds. Subregion: start '[504, 505, 0]' stop '[1008, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.917241 seconds. Prediction took 2.604666 seconds. Subregion: start '[1008, 0, 0]' stop '[1292, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 48.366183 seconds. Prediction took 1.638251 seconds. Subregion: start '[1008, 505, 0]' stop '[1292, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 5.327323 seconds. Prediction took 0.345207 seconds. Subregion: start '[1008, 1010, 0]' stop '[1292, 1237, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI050_PROSTATE_TMA045/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI050_PROSTATE_TMA045/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI051_PROSTATE_Benign_TMA043N', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI051_PROSTATE_Benign_TMA043N/preprocessing/imc/ROI051_PROSTATE_Benign_TMA043N_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI051_PROSTATE_Benign_TMA043N/preprocessing/imc/ROI051_PROSTATE_Benign_TMA043N_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI051_PROSTATE_Benign_TMA043N/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI051_PROSTATE_Benign_TMA043N\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI051_PROSTATE_Benign_TMA043N/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI051_PROSTATE_Benign_TMA043N/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI051_PROSTATE_Benign_TMA043N/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:37:54,104 opConservationTracking 1158 140451010193216 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:37:54,117 opStructuredTracking 1158 140451010193216 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:37:54,119 structuredTrackingWorkflow 1158 140451010193216 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:37:54,787 __init__ 1158 140451010193216 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI051_PROSTATE_Benign_TMA043N/probabilities/imc/ilastik/ROI051_PROSTATE_Benign_TMA043N_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 18.581808 seconds. Prediction took 4.36089 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 22.289013 seconds. Prediction took 2.545458 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.360485 seconds. Prediction took 0.837842 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1092, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 30.29458 seconds. Prediction took 3.559962 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 33.843717 seconds. Prediction took 2.54695 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 36.021302 seconds. Prediction took 0.39357 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1092, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 34.095448 seconds. Prediction took 2.330713 seconds. Subregion: start '[1010, 0, 0]' stop '[1076, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.8765 seconds. Prediction took 0.516589 seconds. Subregion: start '[1010, 504, 0]' stop '[1076, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 2.382095 seconds. Prediction took 0.054289 seconds. Subregion: start '[1010, 1008, 0]' stop '[1076, 1092, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI051_PROSTATE_Benign_TMA043N/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI051_PROSTATE_Benign_TMA043N/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI052_PROSTATE_Benign_TMA046N', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI052_PROSTATE_Benign_TMA046N/preprocessing/imc/ROI052_PROSTATE_Benign_TMA046N_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI052_PROSTATE_Benign_TMA046N/preprocessing/imc/ROI052_PROSTATE_Benign_TMA046N_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI052_PROSTATE_Benign_TMA046N/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI052_PROSTATE_Benign_TMA046N\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI052_PROSTATE_Benign_TMA046N/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI052_PROSTATE_Benign_TMA046N/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI052_PROSTATE_Benign_TMA046N/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:39:26,464 opConservationTracking 1176 140338170783552 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:39:26,473 opStructuredTracking 1176 140338170783552 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:39:26,475 structuredTrackingWorkflow 1176 140338170783552 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:39:27,074 __init__ 1176 140338170783552 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI052_PROSTATE_Benign_TMA046N/probabilities/imc/ilastik/ROI052_PROSTATE_Benign_TMA046N_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 22.184102 seconds. Prediction took 3.156512 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 25.552865 seconds. Prediction took 2.340397 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.338296 seconds. Prediction took 0.904495 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1194, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 34.605248 seconds. Prediction took 5.515898 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.087401 seconds. Prediction took 3.23253 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.96209 seconds. Prediction took 0.887865 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1194, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.421098 seconds. Prediction took 0.714206 seconds. Subregion: start '[1010, 0, 0]' stop '[1156, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.339024 seconds. Prediction took 0.654454 seconds. Subregion: start '[1010, 504, 0]' stop '[1156, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 2.842508 seconds. Prediction took 0.12472 seconds. Subregion: start '[1010, 1008, 0]' stop '[1156, 1194, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI052_PROSTATE_Benign_TMA046N/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI052_PROSTATE_Benign_TMA046N/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI053_PROSTATE_TMA046', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI053_PROSTATE_TMA046/preprocessing/imc/ROI053_PROSTATE_TMA046_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI053_PROSTATE_TMA046/preprocessing/imc/ROI053_PROSTATE_TMA046_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI053_PROSTATE_TMA046/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI053_PROSTATE_TMA046\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI053_PROSTATE_TMA046/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI053_PROSTATE_TMA046/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI053_PROSTATE_TMA046/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:41:05,745 opConservationTracking 1194 140469826004800 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:41:05,756 opStructuredTracking 1194 140469826004800 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:41:05,758 structuredTrackingWorkflow 1194 140469826004800 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:41:06,387 __init__ 1194 140469826004800 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI053_PROSTATE_TMA046/probabilities/imc/ilastik/ROI053_PROSTATE_TMA046_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.571745 seconds. Prediction took 1.620416 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 34.616116 seconds. Prediction took 2.634543 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.920937 seconds. Prediction took 0.863743 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1207, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.811417 seconds. Prediction took 2.75017 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.753036 seconds. Prediction took 2.19826 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 48.568504 seconds. Prediction took 1.010231 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1207, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 50.012137 seconds. Prediction took 0.610692 seconds. Subregion: start '[1010, 0, 0]' stop '[1150, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 52.507315 seconds. Prediction took 0.433239 seconds. Subregion: start '[1010, 504, 0]' stop '[1150, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.218396 seconds. Prediction took 0.144184 seconds. Subregion: start '[1010, 1008, 0]' stop '[1150, 1207, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI053_PROSTATE_TMA046/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI053_PROSTATE_TMA046/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI054_PROSTATE_TMA048', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI054_PROSTATE_TMA048/preprocessing/imc/ROI054_PROSTATE_TMA048_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI054_PROSTATE_TMA048/preprocessing/imc/ROI054_PROSTATE_TMA048_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI054_PROSTATE_TMA048/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI054_PROSTATE_TMA048\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI054_PROSTATE_TMA048/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI054_PROSTATE_TMA048/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI054_PROSTATE_TMA048/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:42:52,708 opConservationTracking 1212 140086754604864 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:42:52,722 opStructuredTracking 1212 140086754604864 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:42:52,725 structuredTrackingWorkflow 1212 140086754604864 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:42:53,346 __init__ 1212 140086754604864 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI054_PROSTATE_TMA048/probabilities/imc/ilastik/ROI054_PROSTATE_TMA048_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.63382 seconds. Prediction took 5.687617 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.680618 seconds. Prediction took 3.236375 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.681983 seconds. Prediction took 3.305638 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1217, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.593056 seconds. Prediction took 4.197021 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.997727 seconds. Prediction took 2.171864 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.034892 seconds. Prediction took 3.872451 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1217, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.883518 seconds. Prediction took 1.907813 seconds. Subregion: start '[1010, 0, 0]' stop '[1186, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 48.325697 seconds. Prediction took 1.149164 seconds. Subregion: start '[1010, 504, 0]' stop '[1186, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 4.178625 seconds. Prediction took 0.170969 seconds. Subregion: start '[1010, 1008, 0]' stop '[1186, 1217, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI054_PROSTATE_TMA048/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI054_PROSTATE_TMA048/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI055_PROSTATE_TMA049', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI055_PROSTATE_TMA049/preprocessing/imc/ROI055_PROSTATE_TMA049_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI055_PROSTATE_TMA049/preprocessing/imc/ROI055_PROSTATE_TMA049_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI055_PROSTATE_TMA049/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI055_PROSTATE_TMA049\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI055_PROSTATE_TMA049/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI055_PROSTATE_TMA049/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI055_PROSTATE_TMA049/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:44:36,584 opConservationTracking 1230 140447817217856 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:44:36,594 opStructuredTracking 1230 140447817217856 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:44:36,596 structuredTrackingWorkflow 1230 140447817217856 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:44:37,194 __init__ 1230 140447817217856 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI055_PROSTATE_TMA049/probabilities/imc/ilastik/ROI055_PROSTATE_TMA049_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 7.412467 seconds. Prediction took 0.517009 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1081, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 20.629159 seconds. Prediction took 2.91956 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 25.94569 seconds. Prediction took 4.182312 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.305245 seconds. Prediction took 2.5992800000000003 seconds. Subregion: start '[505, 0, 0]' stop '[978, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 30.59501 seconds. Prediction took 1.959959 seconds. Subregion: start '[505, 504, 0]' stop '[978, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 32.575742 seconds. Prediction took 0.171261 seconds. Subregion: start '[505, 1008, 0]' stop '[978, 1081, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI055_PROSTATE_TMA049/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI055_PROSTATE_TMA049/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI056_PROSTATE_TMA054', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI056_PROSTATE_TMA054/preprocessing/imc/ROI056_PROSTATE_TMA054_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI056_PROSTATE_TMA054/preprocessing/imc/ROI056_PROSTATE_TMA054_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI056_PROSTATE_TMA054/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI056_PROSTATE_TMA054\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI056_PROSTATE_TMA054/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI056_PROSTATE_TMA054/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI056_PROSTATE_TMA054/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:46:03,350 opConservationTracking 1248 139740824991552 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:46:03,360 opStructuredTracking 1248 139740824991552 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:46:03,362 structuredTrackingWorkflow 1248 139740824991552 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:46:03,977 __init__ 1248 139740824991552 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI056_PROSTATE_TMA054/probabilities/imc/ilastik/ROI056_PROSTATE_TMA054_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 504, 505, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.694566000000002 seconds. Prediction took 3.375137 seconds. Subregion: start '[0, 1010, 0]' stop '[504, 1121, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.434785 seconds. Prediction took 2.651223 seconds. Subregion: start '[0, 0, 0]' stop '[504, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 30.543836 seconds. Prediction took 5.076786 seconds. Subregion: start '[0, 505, 0]' stop '[504, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.209527 seconds. Prediction took 3.129297 seconds. Subregion: start '[504, 0, 0]' stop '[1008, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.925729 seconds. Prediction took 1.716097 seconds. Subregion: start '[504, 1010, 0]' stop '[1008, 1121, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.478662 seconds. Prediction took 2.2251440000000002 seconds. Subregion: start '[1008, 0, 0]' stop '[1143, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.620573 seconds. Prediction took 2.507753 seconds. Subregion: start '[504, 505, 0]' stop '[1008, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.607894 seconds. Prediction took 0.584696 seconds. Subregion: start '[1008, 505, 0]' stop '[1143, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 2.643219 seconds. Prediction took 0.08538 seconds. Subregion: start '[1008, 1010, 0]' stop '[1143, 1121, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI056_PROSTATE_TMA054/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI056_PROSTATE_TMA054/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI057_PROSTATE_TMA055', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI057_PROSTATE_TMA055/preprocessing/imc/ROI057_PROSTATE_TMA055_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI057_PROSTATE_TMA055/preprocessing/imc/ROI057_PROSTATE_TMA055_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI057_PROSTATE_TMA055/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI057_PROSTATE_TMA055\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI057_PROSTATE_TMA055/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI057_PROSTATE_TMA055/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI057_PROSTATE_TMA055/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:47:43,926 opConservationTracking 1266 140384325338944 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:47:43,939 opStructuredTracking 1266 140384325338944 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:47:43,941 structuredTrackingWorkflow 1266 140384325338944 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:47:44,621 __init__ 1266 140384325338944 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI057_PROSTATE_TMA055/probabilities/imc/ilastik/ROI057_PROSTATE_TMA055_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.49101 seconds. Prediction took 1.854396 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1105, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.100423 seconds. Prediction took 2.5881119999999997 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.40042 seconds. Prediction took 2.281271 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 36.488886 seconds. Prediction took 3.38357 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1105, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 36.571329 seconds. Prediction took 3.78892 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 36.771488 seconds. Prediction took 3.769768 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.694659 seconds. Prediction took 0.233084 seconds. Subregion: start '[1010, 0, 0]' stop '[1050, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.036941 seconds. Prediction took 0.177005 seconds. Subregion: start '[1010, 504, 0]' stop '[1050, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 1.699639 seconds. Prediction took 0.03314 seconds. Subregion: start '[1010, 1008, 0]' stop '[1050, 1105, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI057_PROSTATE_TMA055/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI057_PROSTATE_TMA055/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI058_PROSTATE_TMA056', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI058_PROSTATE_TMA056/preprocessing/imc/ROI058_PROSTATE_TMA056_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI058_PROSTATE_TMA056/preprocessing/imc/ROI058_PROSTATE_TMA056_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI058_PROSTATE_TMA056/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI058_PROSTATE_TMA056\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI058_PROSTATE_TMA056/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI058_PROSTATE_TMA056/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI058_PROSTATE_TMA056/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:49:21,395 opConservationTracking 1284 140021368518464 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:49:21,410 opStructuredTracking 1284 140021368518464 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:49:21,412 structuredTrackingWorkflow 1284 140021368518464 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:49:22,049 __init__ 1284 140021368518464 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI058_PROSTATE_TMA056/probabilities/imc/ilastik/ROI058_PROSTATE_TMA056_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 24.895808 seconds. Prediction took 4.36972 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.432316 seconds. Prediction took 2.252214 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 30.799413 seconds. Prediction took 2.053563 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1224, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.795192 seconds. Prediction took 3.871611 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.065234 seconds. Prediction took 3.331642 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.863958 seconds. Prediction took 0.997693 seconds. Subregion: start '[1010, 0, 0]' stop '[1139, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.26706 seconds. Prediction took 1.205334 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1224, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 47.213163 seconds. Prediction took 0.651521 seconds. Subregion: start '[1010, 504, 0]' stop '[1139, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.4299 seconds. Prediction took 0.133157 seconds. Subregion: start '[1010, 1008, 0]' stop '[1139, 1224, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI058_PROSTATE_TMA056/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI058_PROSTATE_TMA056/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI059_PROSTATE_TMA057', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI059_PROSTATE_TMA057/preprocessing/imc/ROI059_PROSTATE_TMA057_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI059_PROSTATE_TMA057/preprocessing/imc/ROI059_PROSTATE_TMA057_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI059_PROSTATE_TMA057/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI059_PROSTATE_TMA057\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI059_PROSTATE_TMA057/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI059_PROSTATE_TMA057/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI059_PROSTATE_TMA057/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:51:03,837 opConservationTracking 1302 140153970321216 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:51:03,852 opStructuredTracking 1302 140153970321216 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:51:03,855 structuredTrackingWorkflow 1302 140153970321216 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:51:04,510 __init__ 1302 140153970321216 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI059_PROSTATE_TMA057/probabilities/imc/ilastik/ROI059_PROSTATE_TMA057_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.177625 seconds. Prediction took 2.5810589999999998 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 30.695861999999998 seconds. Prediction took 0.898985 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1199, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.157085 seconds. Prediction took 2.855883 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.130833 seconds. Prediction took 3.47174 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.955328 seconds. Prediction took 3.5031280000000002 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.000115 seconds. Prediction took 0.608217 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1199, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.905619 seconds. Prediction took 0.467853 seconds. Subregion: start '[1010, 504, 0]' stop '[1089, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.202457 seconds. Prediction took 0.433757 seconds. Subregion: start '[1010, 0, 0]' stop '[1089, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 1.782306 seconds. Prediction took 0.08624 seconds. Subregion: start '[1010, 1008, 0]' stop '[1089, 1199, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI059_PROSTATE_TMA057/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI059_PROSTATE_TMA057/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI060_PROSTATE_TMA059', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI060_PROSTATE_TMA059/preprocessing/imc/ROI060_PROSTATE_TMA059_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI060_PROSTATE_TMA059/preprocessing/imc/ROI060_PROSTATE_TMA059_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI060_PROSTATE_TMA059/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI060_PROSTATE_TMA059\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI060_PROSTATE_TMA059/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI060_PROSTATE_TMA059/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI060_PROSTATE_TMA059/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:52:45,236 opConservationTracking 1320 140430305392448 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:52:45,246 opStructuredTracking 1320 140430305392448 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:52:45,248 structuredTrackingWorkflow 1320 140430305392448 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:52:45,875 __init__ 1320 140430305392448 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI060_PROSTATE_TMA059/probabilities/imc/ilastik/ROI060_PROSTATE_TMA059_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 33.020187 seconds. Prediction took 3.178805 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 34.61342 seconds. Prediction took 3.6451890000000002 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.45227 seconds. Prediction took 2.607577 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1162, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.744803 seconds. Prediction took 3.175016 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 47.567083 seconds. Prediction took 2.741705 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 47.620366 seconds. Prediction took 3.353354 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1162, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 51.711531 seconds. Prediction took 0.749309 seconds. Subregion: start '[1010, 0, 0]' stop '[1140, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 52.786312 seconds. Prediction took 0.855402 seconds. Subregion: start '[1010, 504, 0]' stop '[1140, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 2.037123 seconds. Prediction took 0.106416 seconds. Subregion: start '[1010, 1008, 0]' stop '[1140, 1162, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI060_PROSTATE_TMA059/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI060_PROSTATE_TMA059/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI061_PROSTATE_TMA060', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI061_PROSTATE_TMA060/preprocessing/imc/ROI061_PROSTATE_TMA060_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI061_PROSTATE_TMA060/preprocessing/imc/ROI061_PROSTATE_TMA060_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI061_PROSTATE_TMA060/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI061_PROSTATE_TMA060\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI061_PROSTATE_TMA060/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI061_PROSTATE_TMA060/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI061_PROSTATE_TMA060/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:54:32,727 opConservationTracking 1338 140693992527680 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:54:32,737 opStructuredTracking 1338 140693992527680 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:54:32,739 structuredTrackingWorkflow 1338 140693992527680 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:54:33,346 __init__ 1338 140693992527680 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI061_PROSTATE_TMA060/probabilities/imc/ilastik/ROI061_PROSTATE_TMA060_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.001958 seconds. Prediction took 5.444126 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1229, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 29.506796 seconds. Prediction took 4.385179 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 33.964317 seconds. Prediction took 4.427221 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.266415 seconds. Prediction took 4.570975 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.649171 seconds. Prediction took 2.451122 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1229, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.53781 seconds. Prediction took 2.412171 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 49.018766 seconds. Prediction took 0.600436 seconds. Subregion: start '[1010, 0, 0]' stop '[1080, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 49.983748 seconds. Prediction took 0.341101 seconds. Subregion: start '[1010, 504, 0]' stop '[1080, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 2.089043 seconds. Prediction took 0.091313 seconds. Subregion: start '[1010, 1008, 0]' stop '[1080, 1229, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI061_PROSTATE_TMA060/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI061_PROSTATE_TMA060/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI062_PROSTATE_TMA061', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI062_PROSTATE_TMA061/preprocessing/imc/ROI062_PROSTATE_TMA061_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI062_PROSTATE_TMA061/preprocessing/imc/ROI062_PROSTATE_TMA061_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI062_PROSTATE_TMA061/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI062_PROSTATE_TMA061\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI062_PROSTATE_TMA061/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI062_PROSTATE_TMA061/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI062_PROSTATE_TMA061/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:56:18,176 opConservationTracking 1356 139725808179008 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:56:18,192 opStructuredTracking 1356 139725808179008 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:56:18,194 structuredTrackingWorkflow 1356 139725808179008 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:56:18,815 __init__ 1356 139725808179008 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI062_PROSTATE_TMA061/probabilities/imc/ilastik/ROI062_PROSTATE_TMA061_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 22.906393 seconds. Prediction took 3.783279 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.37126 seconds. Prediction took 2.325457 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.916489 seconds. Prediction took 1.7785790000000001 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1221, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 34.669918 seconds. Prediction took 5.868486 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.931713 seconds. Prediction took 2.298001 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1221, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.514454 seconds. Prediction took 2.815562 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.027873 seconds. Prediction took 2.239484 seconds. Subregion: start '[1010, 0, 0]' stop '[1190, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.5207 seconds. Prediction took 0.752865 seconds. Subregion: start '[1010, 1008, 0]' stop '[1190, 1221, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 46.877852 seconds. Prediction took 0.524135 seconds. Subregion: start '[1010, 504, 0]' stop '[1190, 1008, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI062_PROSTATE_TMA061/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI062_PROSTATE_TMA061/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI063_PROSTATE_TMA062', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI063_PROSTATE_TMA062/preprocessing/imc/ROI063_PROSTATE_TMA062_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI063_PROSTATE_TMA062/preprocessing/imc/ROI063_PROSTATE_TMA062_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI063_PROSTATE_TMA062/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI063_PROSTATE_TMA062\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI063_PROSTATE_TMA062/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI063_PROSTATE_TMA062/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI063_PROSTATE_TMA062/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:58:00,537 opConservationTracking 1374 139843865782080 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:58:00,548 opStructuredTracking 1374 139843865782080 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:58:00,550 structuredTrackingWorkflow 1374 139843865782080 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:58:01,173 __init__ 1374 139843865782080 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI063_PROSTATE_TMA062/probabilities/imc/ilastik/ROI063_PROSTATE_TMA062_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.295306 seconds. Prediction took 2.332609 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.466431 seconds. Prediction took 3.545804 seconds. Subregion: start '[0, 504, 0]' stop '[505, 920, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.660802 seconds. Prediction took 3.689611 seconds. Subregion: start '[505, 0, 0]' stop '[712, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 41.780182 seconds. Prediction took 0.4707 seconds. Subregion: start '[505, 504, 0]' stop '[712, 920, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI063_PROSTATE_TMA062/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI063_PROSTATE_TMA062/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI064_PROSTATE_Benign_TMA063N', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI064_PROSTATE_Benign_TMA063N/preprocessing/imc/ROI064_PROSTATE_Benign_TMA063N_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI064_PROSTATE_Benign_TMA063N/preprocessing/imc/ROI064_PROSTATE_Benign_TMA063N_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI064_PROSTATE_Benign_TMA063N/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI064_PROSTATE_Benign_TMA063N\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI064_PROSTATE_Benign_TMA063N/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI064_PROSTATE_Benign_TMA063N/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI064_PROSTATE_Benign_TMA063N/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 02:59:37,402 opConservationTracking 1392 139829010417472 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:59:37,414 opStructuredTracking 1392 139829010417472 Could not find any ILP solver\n",
      "WARNING 2023-01-13 02:59:37,416 structuredTrackingWorkflow 1392 139829010417472 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 02:59:38,067 __init__ 1392 139829010417472 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI064_PROSTATE_Benign_TMA063N/probabilities/imc/ilastik/ROI064_PROSTATE_Benign_TMA063N_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 23.080677 seconds. Prediction took 3.792011 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 22.957927 seconds. Prediction took 5.191415 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.39657 seconds. Prediction took 1.031687 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1227, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 35.044615 seconds. Prediction took 3.538549 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.62426 seconds. Prediction took 2.293788 seconds. Subregion: start '[1010, 0, 0]' stop '[1025, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.59573 seconds. Prediction took 2.676008 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1227, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 38.49306 seconds. Prediction took 3.114183 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.320097 seconds. Prediction took 0.153272 seconds. Subregion: start '[1010, 504, 0]' stop '[1025, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 2.212105 seconds. Prediction took 0.037071 seconds. Subregion: start '[1010, 1008, 0]' stop '[1025, 1227, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI064_PROSTATE_Benign_TMA063N/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI064_PROSTATE_Benign_TMA063N/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI065_PROSTATE_Benign_TMA064N', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI065_PROSTATE_Benign_TMA064N/preprocessing/imc/ROI065_PROSTATE_Benign_TMA064N_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI065_PROSTATE_Benign_TMA064N/preprocessing/imc/ROI065_PROSTATE_Benign_TMA064N_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI065_PROSTATE_Benign_TMA064N/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI065_PROSTATE_Benign_TMA064N\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI065_PROSTATE_Benign_TMA064N/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI065_PROSTATE_Benign_TMA064N/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI065_PROSTATE_Benign_TMA064N/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 03:01:14,962 opConservationTracking 1410 139965164840768 Could not find any ILP solver\n",
      "WARNING 2023-01-13 03:01:14,973 opStructuredTracking 1410 139965164840768 Could not find any ILP solver\n",
      "WARNING 2023-01-13 03:01:14,976 structuredTrackingWorkflow 1410 139965164840768 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 03:01:15,598 __init__ 1410 139965164840768 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI065_PROSTATE_Benign_TMA064N/probabilities/imc/ilastik/ROI065_PROSTATE_Benign_TMA064N_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 504, 505, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 14.481937 seconds. Prediction took 3.67072 seconds. Subregion: start '[0, 505, 0]' stop '[504, 954, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 19.806481 seconds. Prediction took 4.502853 seconds. Subregion: start '[0, 0, 0]' stop '[504, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.719444 seconds. Prediction took 2.171073 seconds. Subregion: start '[504, 505, 0]' stop '[962, 954, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.144141 seconds. Prediction took 2.748437 seconds. Subregion: start '[504, 0, 0]' stop '[962, 505, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI065_PROSTATE_Benign_TMA064N/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI065_PROSTATE_Benign_TMA064N/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI066_PROSTATE_TMA064', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI066_PROSTATE_TMA064/preprocessing/imc/ROI066_PROSTATE_TMA064_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI066_PROSTATE_TMA064/preprocessing/imc/ROI066_PROSTATE_TMA064_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI066_PROSTATE_TMA064/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI066_PROSTATE_TMA064\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI066_PROSTATE_TMA064/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI066_PROSTATE_TMA064/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI066_PROSTATE_TMA064/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 03:02:38,799 opConservationTracking 1428 140367200376640 Could not find any ILP solver\n",
      "WARNING 2023-01-13 03:02:38,809 opStructuredTracking 1428 140367200376640 Could not find any ILP solver\n",
      "WARNING 2023-01-13 03:02:38,811 structuredTrackingWorkflow 1428 140367200376640 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 03:02:39,458 __init__ 1428 140367200376640 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI066_PROSTATE_TMA064/probabilities/imc/ilastik/ROI066_PROSTATE_TMA064_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 504, 505, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 31.024471 seconds. Prediction took 2.778206 seconds. Subregion: start '[0, 0, 0]' stop '[504, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 34.381714 seconds. Prediction took 5.101758 seconds. Subregion: start '[0, 505, 0]' stop '[504, 693, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.518621 seconds. Prediction took 0.784012 seconds. Subregion: start '[504, 505, 0]' stop '[997, 693, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.476401 seconds. Prediction took 1.6058240000000001 seconds. Subregion: start '[504, 0, 0]' stop '[997, 505, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI066_PROSTATE_TMA064/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI066_PROSTATE_TMA064/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI067_PROSTATE_TMA065', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI067_PROSTATE_TMA065/preprocessing/imc/ROI067_PROSTATE_TMA065_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI067_PROSTATE_TMA065/preprocessing/imc/ROI067_PROSTATE_TMA065_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI067_PROSTATE_TMA065/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI067_PROSTATE_TMA065\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI067_PROSTATE_TMA065/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI067_PROSTATE_TMA065/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI067_PROSTATE_TMA065/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 03:04:15,136 opConservationTracking 1446 140068903266112 Could not find any ILP solver\n",
      "WARNING 2023-01-13 03:04:15,148 opStructuredTracking 1446 140068903266112 Could not find any ILP solver\n",
      "WARNING 2023-01-13 03:04:15,150 structuredTrackingWorkflow 1446 140068903266112 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 03:04:15,773 __init__ 1446 140068903266112 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI067_PROSTATE_TMA065/probabilities/imc/ilastik/ROI067_PROSTATE_TMA065_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 21.583053 seconds. Prediction took 3.432687 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 21.069515 seconds. Prediction took 4.317376 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 22.954493 seconds. Prediction took 4.756342 seconds. Subregion: start '[505, 0, 0]' stop '[985, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.177489 seconds. Prediction took 1.982494 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1210, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 32.984654 seconds. Prediction took 0.864751 seconds. Subregion: start '[505, 1008, 0]' stop '[985, 1210, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 33.939105 seconds. Prediction took 1.491341 seconds. Subregion: start '[505, 504, 0]' stop '[985, 1008, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI067_PROSTATE_TMA065/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI067_PROSTATE_TMA065/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI068_PROSTATE_TMA066', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI068_PROSTATE_TMA066/preprocessing/imc/ROI068_PROSTATE_TMA066_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI068_PROSTATE_TMA066/preprocessing/imc/ROI068_PROSTATE_TMA066_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI068_PROSTATE_TMA066/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI068_PROSTATE_TMA066\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI068_PROSTATE_TMA066/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI068_PROSTATE_TMA066/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI068_PROSTATE_TMA066/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 03:05:43,709 opConservationTracking 1464 140649850357568 Could not find any ILP solver\n",
      "WARNING 2023-01-13 03:05:43,723 opStructuredTracking 1464 140649850357568 Could not find any ILP solver\n",
      "WARNING 2023-01-13 03:05:43,725 structuredTrackingWorkflow 1464 140649850357568 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 03:05:44,403 __init__ 1464 140649850357568 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI068_PROSTATE_TMA066/probabilities/imc/ilastik/ROI068_PROSTATE_TMA066_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 20.774537 seconds. Prediction took 5.157559 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.376708 seconds. Prediction took 3.378429 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.432413 seconds. Prediction took 5.998497 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1270, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 36.001302 seconds. Prediction took 3.213197 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.731996 seconds. Prediction took 3.44419 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 42.346335 seconds. Prediction took 1.170058 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1270, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.144041 seconds. Prediction took 0.453389 seconds. Subregion: start '[1010, 0, 0]' stop '[1070, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 45.011008 seconds. Prediction took 0.620316 seconds. Subregion: start '[1010, 504, 0]' stop '[1070, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 2.5285130000000002 seconds. Prediction took 0.129528 seconds. Subregion: start '[1010, 1008, 0]' stop '[1070, 1270, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI068_PROSTATE_TMA066/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI068_PROSTATE_TMA066/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI069_PROSTATE_TMA067', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI069_PROSTATE_TMA067/preprocessing/imc/ROI069_PROSTATE_TMA067_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI069_PROSTATE_TMA067/preprocessing/imc/ROI069_PROSTATE_TMA067_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI069_PROSTATE_TMA067/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI069_PROSTATE_TMA067\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI069_PROSTATE_TMA067/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI069_PROSTATE_TMA067/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI069_PROSTATE_TMA067/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 03:07:23,795 opConservationTracking 1482 140124082657088 Could not find any ILP solver\n",
      "WARNING 2023-01-13 03:07:23,807 opStructuredTracking 1482 140124082657088 Could not find any ILP solver\n",
      "WARNING 2023-01-13 03:07:23,810 structuredTrackingWorkflow 1482 140124082657088 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 03:07:24,524 __init__ 1482 140124082657088 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI069_PROSTATE_TMA067/probabilities/imc/ilastik/ROI069_PROSTATE_TMA067_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 504, 505, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 25.158593 seconds. Prediction took 0.933983 seconds. Subregion: start '[0, 1010, 0]' stop '[504, 1082, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 27.381767 seconds. Prediction took 2.419733 seconds. Subregion: start '[0, 0, 0]' stop '[504, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.922331 seconds. Prediction took 3.732589 seconds. Subregion: start '[0, 505, 0]' stop '[504, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 36.721185 seconds. Prediction took 2.8345219999999998 seconds. Subregion: start '[504, 0, 0]' stop '[1008, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.503592 seconds. Prediction took 1.729647 seconds. Subregion: start '[504, 1010, 0]' stop '[1008, 1082, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 39.440889 seconds. Prediction took 1.969015 seconds. Subregion: start '[504, 505, 0]' stop '[1008, 1010, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.952466 seconds. Prediction took 0.823923 seconds. Subregion: start '[1008, 0, 0]' stop '[1142, 505, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 3.455292 seconds. Prediction took 0.082032 seconds. Subregion: start '[1008, 1010, 0]' stop '[1142, 1082, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.975446 seconds. Prediction took 0.545017 seconds. Subregion: start '[1008, 505, 0]' stop '[1142, 1010, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI069_PROSTATE_TMA067/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI069_PROSTATE_TMA067/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "INFO:root:{'MIAAIM VERSION': '0.0.2', 'MODULE': 'Probabilities', 'METHOD': 'Ilastik', 'ImportOptions': {'root_folder': '/opt/miaaim-20220912-TMA4/data/ROI070_PROSTATE_TMA070', 'input_image': '/opt/miaaim-20220912-TMA4/data/ROI070_PROSTATE_TMA070/preprocessing/imc/ROI070_PROSTATE_TMA070_core.ome.tiff', 'name': 'imc', 'executable': '/opt/ilastik', 'command': '/opt/ilastik/run_ilastik.sh', 'qc': True, 'resume': False}, 'ProcessingSteps': [{'PrepareTraining': {'input_image': '/opt/miaaim-20220912-TMA4/data/ROI070_PROSTATE_TMA070/preprocessing/imc/ROI070_PROSTATE_TMA070_core.ome.tiff', 'output': '/opt/miaaim-20220912-TMA4/data/ROI070_PROSTATE_TMA070/probabilities/imc/ilastik-training', 'nuclei_index': 1, 'channelIDs': [0, 1, 8, 9, 10, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 54, 55, 56, 57, 58, 59, 61], 'crop': True, 'crop_size': '(250, 250)', 'nonzero_fraction': 0.05, 'crop_amount': 2}}, 'QC']}\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "MIAAIM PROBABILITIES\n",
      "MIAAIM VERSION 0.0.2\n",
      "METHOD: Ilastik\n",
      "ROOT FOLDER: /opt/miaaim-20220912-TMA4/data/ROI070_PROSTATE_TMA070\n",
      "PROVENANCE FOLDER: /opt/miaaim-20220912-TMA4/data/ROI070_PROSTATE_TMA070/docs/provenance\n",
      "QC FOLDER: /opt/miaaim-20220912-TMA4/data/ROI070_PROSTATE_TMA070/docs/qc/probabilities/imc/ilastik \n",
      "\n",
      "\n",
      "\n",
      "PROCESSING DATA\n",
      "Resuming Ilastik workflow...\n",
      "ILASTIK PIXEL CLASSIFICATION\n",
      "PROBABILITY IMAGES FOLDER: /opt/miaaim-20220912-TMA4/data/ROI070_PROSTATE_TMA070/probabilities/imc/ilastik\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "Warning: Ignoring your non-empty LD_LIBRARY_PATH\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "INFO ilastik.app: Using tiktorch executable: ['/opt/ilastik/bin/python', '-m', 'tiktorch.server']\n",
      "INFO ilastik.app: config file location: <none>\n",
      "INFO ilastik.app: Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING 2023-01-13 03:09:03,116 opConservationTracking 1500 140360961931072 Could not find any ILP solver\n",
      "WARNING 2023-01-13 03:09:03,127 opStructuredTracking 1500 140360961931072 Could not find any ILP solver\n",
      "WARNING 2023-01-13 03:09:03,129 structuredTrackingWorkflow 1500 140360961931072 Could not find any learning solver. Tracking will use flow-based solver (DPCT). Learning for tracking will be disabled!\n",
      "WARNING 2023-01-13 03:09:03,760 __init__ 1500 140360961931072 Failed to import NeuralNet workflow; check dependencies: libGL.so.1: cannot open shared object file: No such file or directory\n",
      "Traceback (most recent call last):\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/__init__.py\", line 137, in <module>\n",
      "    from . import neuralNetwork\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/__init__.py\", line 21, in <module>\n",
      "    from ._remoteWorkflow import RemoteWorkflow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/workflows/neuralNetwork/_remoteWorkflow.py\", line 25, in <module>\n",
      "    from ilastik.applets.serverConfiguration import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/__init__.py\", line 21, in <module>\n",
      "    from .serverConfigApplet import ServerConfigApplet\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/serverConfigApplet.py\", line 24, in <module>\n",
      "    from .opServerConfig import OpServerConfig\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/opServerConfig.py\", line 27, in <module>\n",
      "    from .configStorage import SERVER_CONFIG\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/ilastik/applets/serverConfiguration/configStorage.py\", line 8, in <module>\n",
      "    from volumina.utility import preferences\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/__init__.py\", line 53, in <module>\n",
      "    from . import api\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/api.py\", line 25, in <module>\n",
      "    from .pixelpipeline.imagepump import ImagePump\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/imagepump.py\", line 30, in <module>\n",
      "    from volumina.pixelpipeline.slicesources import PlanarSliceSource, SyncedSliceSources\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/slicesources.py\", line 28, in <module>\n",
      "    from .interface import DataSourceABC, PlanarSliceSourceABC, RequestABC\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/pixelpipeline/interface.py\", line 29, in <module>\n",
      "    from volumina.utility.qabc import QABC, abstractsignal\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/__init__.py\", line 25, in <module>\n",
      "    from .getMainWindow import getMainWindow\n",
      "  File \"/opt/ilastik/lib/python3.7/site-packages/volumina/utility/getMainWindow.py\", line 1, in <module>\n",
      "    from PyQt5.QtWidgets import QApplication, QWidget, QMainWindow\n",
      "ImportError: libGL.so.1: cannot open shared object file: No such file or directory\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Starting ilastik from \"/opt/ilastik/lib/python3.7\".\n",
      "INFO ilastik.shell.projectManager: Opening Project: /opt/miaaim-20220912-TMA4/models/TMA4-PROSTATE-pixel-classification.ilp\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Beginning Batch Processing\n",
      "INFO ilastik.applets.dataSelection.dataSelectionApplet: Using axistags from previous lane: [z y x c, None]\n",
      "INFO ilastik.applets.batchProcessing.batchProcessingApplet: Exporting to /opt/miaaim-20220912-TMA4/data/ROI070_PROSTATE_TMA070/probabilities/imc/ilastik/ROI070_PROSTATE_TMA070_core_probabilities.tiff\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per pixel is 9.5KiB * safety factor (2.0)\n",
      "INFO lazyflow.utility.bigRequestStreamer: determining blockshape assuming available_ram is 36.9GiB, split between 8 threads\n",
      "INFO lazyflow.utility.bigRequestStreamer: Chose blockshape: (1, 505, 504, 3)\n",
      "INFO lazyflow.utility.bigRequestStreamer: Estimated RAM usage per block is 4.6GiB\n"
     ]
    },
    {
     "name": "stderr",
     "output_type": "stream",
     "text": [
      "WARNING arraytypes.py(1271): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n",
      "WARNING arraytypes.py(1277): FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.\n"
     ]
    },
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "DEBUG lazyflow.operators.classifierOperators: Features took 26.4124 seconds. Prediction took 3.595711 seconds. Subregion: start '[0, 504, 0]' stop '[505, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 28.82839 seconds. Prediction took 2.794412 seconds. Subregion: start '[0, 0, 0]' stop '[505, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 32.51452 seconds. Prediction took 2.972073 seconds. Subregion: start '[0, 1008, 0]' stop '[505, 1154, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 37.357592 seconds. Prediction took 1.6561780000000002 seconds. Subregion: start '[505, 0, 0]' stop '[1010, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.092116 seconds. Prediction took 0.792566 seconds. Subregion: start '[505, 1008, 0]' stop '[1010, 1154, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 40.690986 seconds. Prediction took 3.402874 seconds. Subregion: start '[1010, 504, 0]' stop '[1071, 1008, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 43.989069 seconds. Prediction took 0.276019 seconds. Subregion: start '[1010, 0, 0]' stop '[1071, 504, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 5.801575 seconds. Prediction took 0.056901 seconds. Subregion: start '[1010, 1008, 0]' stop '[1071, 1154, 3]'\n",
      "DEBUG lazyflow.operators.classifierOperators: Features took 44.225041 seconds. Prediction took 1.649784 seconds. Subregion: start '[505, 504, 0]' stop '[1010, 1008, 3]'\n",
      "INFO ilastik.workflows.pixelClassification.pixelClassificationWorkflow: Completed Batch Processing\n",
      "QC: extracting quality control information\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI070_PROSTATE_TMA070/docs/parameters/miaaim-prob-ilastik-imc.yaml\n",
      "Exporting /opt/miaaim-20220912-TMA4/data/ROI070_PROSTATE_TMA070/docs/provenance/miaaim-prob-ilastik-imc.sh\n"
     ]
    }
   ],
   "source": [
    "# iterate over cores in the image list and prepare training crops\n",
    "for c in core_folders:\n",
    "    # get the stem of image (folder name)\n",
    "    name = \"preprocessing/imc/\" + f\"{c.stem}\"+ \"_core.ome.tiff\"\n",
    "    # set root folder\n",
    "    root_folder = data_folder.joinpath(c.stem)\n",
    "    # set input image\n",
    "    input_image = c.joinpath(name)\n",
    "\n",
    "    # create Ilastik object (set resume flag to true)\n",
    "    IL = Ilastik(\n",
    "        root_folder=root_folder,\n",
    "        input_image=input_image,\n",
    "        name=None,\n",
    "        executable=None,\n",
    "        qc=True,\n",
    "        resume=True\n",
    "        )\n",
    "\n",
    "    # predict headless on full image\n",
    "    IL.PredictHeadless(ilp=ilp_model)\n",
    "\n",
    "    # export QC information\n",
    "    IL.QC()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "5da9d3d5",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.12.3"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
